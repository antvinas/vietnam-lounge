import{j as o,o as br,q as xr,f as Yn,g as yr,H as wr,h as Er,r as $r,s as jr,t as Nr,z as Qe,k as Tr,u as Sr,v as kr,w as Cr,a as Pr,c as Mn,x as In,y as Rn,A as On,B as Fr,C as Lr,D as Ar,E as Mr,G as Ir}from"./index-DbUEaAMy.js";import{r as u,c as $,a as Rr}from"./react-Dp4Gqg7U.js";import{u as sn}from"./useQuery-BhrWanxj.js";import{S as jn}from"./index-DfvoamT7.js";import{e as Or,f as _n,g as _r}from"./index-FMo13rtH.js";import{M as Hr,G as Dr}from"./GoogleMap-Co9WtoOZ.js";import{u as Wr}from"./useMutation-C76_koY-.js";import{L as Br}from"./Loading-sQkuDrhk.js";import"./spot.write-Cy02D3Oi.js";import"./firebase-Co7q5P-C.js";import"./firestore-DzFVOJbi.js";import"./firebase-CmtxdFcx.js";import"./spot.search-Bgh3s1s1.js";function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(null,arguments)}function rn(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Ze(e){var t=u.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(r){n[r]=function(){var a;return(a=t.fn[r]).call.apply(a,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function en(e){return u.useReducer(function(t,n){return O({},t,typeof n=="function"?n(t):n)},e)}var Kn=u.createContext(void 0),Hn="cubic-bezier(0.25, 0.8, 0.25, 1)",ft=20,Pe=typeof window<"u"&&"ontouchstart"in window,pn=function(e,t,n){return Math.max(Math.min(e,n),t)},Kt=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),pn(e,1*(1-n),Math.max(6,t)*(1+n))},hn=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?u.useEffect:u.useLayoutEffect;function ht(e,t,n){var r=u.useRef(t);r.current=t,u.useEffect(function(){function a(i){r.current(i)}return e&&window.addEventListener(e,a,n),function(){e&&window.removeEventListener(e,a)}},[e])}var Vr=["container"];function Gr(e){var t=e.container,n=t===void 0?document.body:t,r=rn(e,Vr);return Rr.createPortal($.createElement("div",O({},r)),n)}function Ur(e){return $.createElement("svg",O({width:"44",height:"44",viewBox:"0 0 768 768"},e),$.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Xr(e){return $.createElement("svg",O({width:"44",height:"44",viewBox:"0 0 768 768"},e),$.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Yr(e){return $.createElement("svg",O({width:"44",height:"44",viewBox:"0 0 768 768"},e),$.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Kr(){return u.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function Dn(e){var t=e.touches[0],n=t.clientX,r=t.clientY;if(e.touches.length>=2){var a=e.touches[1],i=a.clientX,s=a.clientY;return[(n+i)/2,(r+s)/2,Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2))]}return[n,r,0]}var De=function(e,t,n,r){var a,i=n*t,s=(i-r)/2,l=e;return i<=r?(a=1,l=0):e>0&&s-e<=0?(a=2,l=s):e<0&&s+e<=0&&(a=3,l=-s),[a,l]};function ln(e,t,n,r,a,i,s,l,c,f){s===void 0&&(s=innerWidth/2),l===void 0&&(l=innerHeight/2),c===void 0&&(c=0),f===void 0&&(f=0);var m=De(e,i,n,innerWidth)[0],p=De(t,i,r,innerHeight),v=innerWidth/2,g=innerHeight/2;return{x:s-i/a*(s-(v+e))-v+(r/n>=3&&n*i===innerWidth?0:m?c/2:c),y:l-i/a*(l-(g+t))-g+(p[0]?f/2:f),lastCX:s,lastCY:l}}function gn(e,t,n){var r=e%180!=0;return r?[n,t,r]:[t,n,r]}function cn(e,t,n){var r=gn(n,innerWidth,innerHeight),a=r[0],i=r[1],s=0,l=a,c=i,f=e/t*i,m=t/e*a;return e<a&&t<i?(l=e,c=t):e<a&&t>=i?l=f:e>=a&&t<i||e/t>a/i?c=m:t/e>=3&&!r[2]?s=((c=m)-i)/2:l=f,{width:l,height:c,x:0,y:s,pause:!0}}function qt(e,t){var n=t.leading,r=n!==void 0&&n,a=t.maxWait,i=t.wait,s=i===void 0?a||0:i,l=u.useRef(e);l.current=e;var c=u.useRef(0),f=u.useRef(),m=function(){return f.current&&clearTimeout(f.current)},p=u.useCallback(function(){var v=[].slice.call(arguments),g=Date.now();function b(){c.current=g,m(),l.current.apply(null,v)}var x=c.current,y=g-x;if(x===0&&(r&&b(),c.current=g),a!==void 0){if(y>a)return void b()}else y<s&&(c.current=g);m(),f.current=setTimeout(function(){b(),c.current=0},s)},[s,a,r]);return p.cancel=m,p}var Wn=function(e,t,n){return ze(e,t,n,100,function(r){return r},function(){return ze(t,e,n)})},qr=function(e){return 1-Math.pow(1-e,4)};function ze(e,t,n,r,a,i){r===void 0&&(r=400),a===void 0&&(a=qr);var s=t-e;if(s!==0){var l=Date.now(),c=0,f=function(){var p=Math.min(1,(Date.now()-l)/r);n(e+a(p)*s)&&p<1?m():(cancelAnimationFrame(c),p>=1&&i&&i())};m()}function m(){c=requestAnimationFrame(f)}}var zr={T:0,L:0,W:0,H:0,FIT:void 0},qn=function(){var e=u.useRef(!1);return u.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Qr=["className"];function Jr(e){var t=e.className,n=t===void 0?"":t,r=rn(e,Qr);return $.createElement("div",O({className:"PhotoView__Spinner "+n},r),$.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},$.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),$.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var Zr=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function ea(e){var t=e.src,n=e.loaded,r=e.broken,a=e.className,i=e.onPhotoLoad,s=e.loadingElement,l=e.brokenElement,c=rn(e,Zr),f=qn();return t&&!r?$.createElement($.Fragment,null,$.createElement("img",O({className:"PhotoView__Photo"+(a?" "+a:""),src:t,onLoad:function(m){var p=m.target;f.current&&i({loaded:!0,naturalWidth:p.naturalWidth,naturalHeight:p.naturalHeight})},onError:function(){f.current&&i({broken:!0})},draggable:!1,alt:""},c)),!n&&(s?$.createElement("span",{className:"PhotoView__icon"},s):$.createElement(Jr,{className:"PhotoView__icon"}))):l?$.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var ta={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function na(e){var t=e.item,n=t.src,r=t.render,a=t.width,i=a===void 0?0:a,s=t.height,l=s===void 0?0:s,c=t.originRef,f=e.visible,m=e.speed,p=e.easing,v=e.wrapClassName,g=e.className,b=e.style,x=e.loadingElement,y=e.brokenElement,E=e.onPhotoTap,T=e.onMaskTap,h=e.onReachMove,S=e.onReachUp,C=e.onPhotoResize,L=e.isActive,W=e.expose,Fe=en(ta),k=Fe[0],j=Fe[1],B=u.useRef(0),Y=qn(),nt=k.naturalWidth,ne=nt===void 0?i:nt,_=k.naturalHeight,H=_===void 0?l:_,Be=k.width,K=Be===void 0?i:Be,rt=k.height,P=rt===void 0?l:rt,V=k.loaded,be=V===void 0?!n:V,ue=k.broken,X=k.x,xe=k.y,re=k.touched,on=k.stopRaf,Le=k.maskTouched,ae=k.rotate,D=k.scale,_t=k.CX,at=k.CY,Ve=k.lastX,$t=k.lastY,M=k.lastCX,Ht=k.lastCY,de=k.lastScale,Ge=k.touchTime,Dt=k.touchLength,oe=k.pause,Ue=k.reach,jt=Ze({onScale:function(d){return ye(Kt(d))},onRotate:function(d){ae!==d&&(W({rotate:d}),j(O({rotate:d},cn(ne,H,d))))}});function ye(d,w,F){D!==d&&(W({scale:d}),j(O({scale:d},ln(X,xe,K,P,D,d,w,F),d<=1&&{x:0,y:0})))}var Wt=qt(function(d,w,F){if(F===void 0&&(F=0),(re||Le)&&L){var we=gn(ae,K,P),Ee=we[0],J=we[1];if(F===0&&B.current===0){var z=Math.abs(d-_t)<=20,Q=Math.abs(w-at)<=20;if(z&&Q)return void j({lastCX:d,lastCY:w});B.current=z?w>at?3:2:1}var pe,Xe=d-M,Ie=w-Ht;if(F===0){var Ye=De(Xe+Ve,D,Ee,innerWidth)[0],st=De(Ie+$t,D,J,innerHeight);pe=function(Re,je,Ne,he){return je&&Re===1||he==="x"?"x":Ne&&Re>1||he==="y"?"y":void 0}(B.current,Ye,st[0],Ue),pe!==void 0&&h(pe,d,w,D)}if(pe==="x"||Le)return void j({reach:"x"});var $e=Kt(D+(F-Dt)/100/2*D,ne/K,.2);W({scale:$e}),j(O({touchLength:F,reach:pe,scale:$e},ln(X,xe,K,P,D,$e,d,w,Xe,Ie)))}},{maxWait:8});function Nt(d){return!on&&!re&&(Y.current&&j(O({},d,{pause:f})),Y.current)}var Ae,fe,Me,Tt,Bt,Vt,Gt,q,Ut=(Bt=function(d){return Nt({x:d})},Vt=function(d){return Nt({y:d})},Gt=function(d){return Y.current&&(W({scale:d}),j({scale:d})),!re&&Y.current},q=Ze({X:function(d){return Bt(d)},Y:function(d){return Vt(d)},S:function(d){return Gt(d)}}),function(d,w,F,we,Ee,J,z,Q,pe,Xe,Ie){var Ye=gn(Xe,Ee,J),st=Ye[0],$e=Ye[1],Re=De(d,Q,st,innerWidth),je=Re[0],Ne=Re[1],he=De(w,Q,$e,innerHeight),lt=he[0],Yt=he[1],ct=Date.now()-Ie;if(ct>=200||Q!==z||Math.abs(pe-z)>1){var Oe=ln(d,w,Ee,J,z,Q),Te=Oe.x,Ke=Oe.y,Z=je?Ne:Te!==d?Te:null,ut=lt?Yt:Ke!==w?Ke:null;return Z!==null&&ze(d,Z,q.X),ut!==null&&ze(w,ut,q.Y),void(Q!==z&&ze(z,Q,q.S))}var qe=(d-F)/ct,_e=(w-we)/ct,He=Math.sqrt(Math.pow(qe,2)+Math.pow(_e,2)),Se=!1,ke=!1;(function(ie,G){var U,se=ie,Ce=0,ee=0,dt=function(kt){U||(U=kt);var Ct=kt-U,Fn=Math.sign(ie),Ln=-.001*Fn,An=Math.sign(-se)*Math.pow(se,2)*2e-4,vr=se*Ct+(Ln+An)*Math.pow(Ct,2)/2;Ce+=vr,U=kt,Fn*(se+=(Ln+An)*Ct)<=0?te():G(Ce)?ge():te()};function ge(){ee=requestAnimationFrame(dt)}function te(){cancelAnimationFrame(ee)}ge()})(He,function(ie){var G=d+ie*(qe/He),U=w+ie*(_e/He),se=De(G,z,st,innerWidth),Ce=se[0],ee=se[1],dt=De(U,z,$e,innerHeight),ge=dt[0],te=dt[1];if(Ce&&!Se&&(Se=!0,je?ze(G,ee,q.X):Wn(ee,G+(G-ee),q.X)),ge&&!ke&&(ke=!0,lt?ze(U,te,q.Y):Wn(te,U+(U-te),q.Y)),Se&&ke)return!1;var kt=Se||q.X(ee),Ct=ke||q.Y(te);return kt&&Ct})}),ot=(Ae=E,fe=function(d,w){Ue||ye(D!==1?1:Math.max(2,ne/K),d,w)},Me=u.useRef(0),Tt=qt(function(){Me.current=0,Ae.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var d=[].slice.call(arguments);Me.current+=1,Tt.apply(void 0,d),Me.current>=2&&(Tt.cancel(),Me.current=0,fe.apply(void 0,d))});function it(d,w){if(B.current=0,(re||Le)&&L){j({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var F=Kt(D,ne/K);if(Ut(X,xe,Ve,$t,K,P,D,F,de,ae,Ge),S(d,w),_t===d&&at===w){if(re)return void ot(d,w);Le&&T(d,w)}}}function St(d,w,F){F===void 0&&(F=0),j({touched:!0,CX:d,CY:w,lastCX:d,lastCY:w,lastX:X,lastY:xe,lastScale:D,touchLength:F,touchTime:Date.now()})}function Xt(d){j({maskTouched:!0,CX:d.clientX,CY:d.clientY,lastX:X,lastY:xe})}ht(Pe?void 0:"mousemove",function(d){d.preventDefault(),Wt(d.clientX,d.clientY)}),ht(Pe?void 0:"mouseup",function(d){it(d.clientX,d.clientY)}),ht(Pe?"touchmove":void 0,function(d){d.preventDefault();var w=Dn(d);Wt.apply(void 0,w)},{passive:!1}),ht(Pe?"touchend":void 0,function(d){var w=d.changedTouches[0];it(w.clientX,w.clientY)},{passive:!1}),ht("resize",qt(function(){be&&!re&&(j(cn(ne,H,ae)),C())},{maxWait:8})),hn(function(){L&&W(O({scale:D,rotate:ae},jt))},[L]);var me=function(d,w,F,we,Ee,J,z,Q,pe,Xe){var Ie=function(Te,Ke,Z,ut,qe){var _e=u.useRef(!1),He=en({lead:!0,scale:Z}),Se=He[0],ke=Se.lead,ie=Se.scale,G=He[1],U=qt(function(se){try{return qe(!0),G({lead:!1,scale:se}),Promise.resolve()}catch(Ce){return Promise.reject(Ce)}},{wait:ut});return hn(function(){_e.current?(qe(!1),G({lead:!0}),U(Z)):_e.current=!0},[Z]),ke?[Te*ie,Ke*ie,Z/ie]:[Te*Z,Ke*Z,1]}(J,z,Q,pe,Xe),Ye=Ie[0],st=Ie[1],$e=Ie[2],Re=function(Te,Ke,Z,ut,qe){var _e=u.useState(zr),He=_e[0],Se=_e[1],ke=u.useState(0),ie=ke[0],G=ke[1],U=u.useRef(),se=Ze({OK:function(){return Te&&G(4)}});function Ce(ee){qe(!1),G(ee)}return u.useEffect(function(){if(U.current||(U.current=Date.now()),Z){if(function(ee,dt){var ge=ee&&ee.current;if(ge&&ge.nodeType===1){var te=ge.getBoundingClientRect();dt({T:te.top,L:te.left,W:te.width,H:te.height,FIT:ge.tagName==="IMG"?getComputedStyle(ge).objectFit:void 0})}}(Ke,Se),Te)return Date.now()-U.current<250?(G(1),requestAnimationFrame(function(){G(2),requestAnimationFrame(function(){return Ce(3)})}),void setTimeout(se.OK,ut)):void G(4);Ce(5)}},[Te,Z]),[ie,He]}(d,w,F,pe,Xe),je=Re[0],Ne=Re[1],he=Ne.W,lt=Ne.FIT,Yt=innerWidth/2,ct=innerHeight/2,Oe=je<3||je>4;return[Oe?he?Ne.L:Yt:we+(Yt-J*Q/2),Oe?he?Ne.T:ct:Ee+(ct-z*Q/2),Ye,Oe&&lt?Ye*(Ne.H/he):st,je===0?$e:Oe?he/(J*Q)||.01:$e,Oe?lt?1:0:1,je,lt]}(f,c,be,X,xe,K,P,D,m,function(d){return j({pause:d})}),N=me[4],A=me[6],R="transform "+m+"ms "+p,I={className:g,onMouseDown:Pe?void 0:function(d){d.stopPropagation(),d.button===0&&St(d.clientX,d.clientY,0)},onTouchStart:Pe?function(d){d.stopPropagation(),St.apply(void 0,Dn(d))}:void 0,onWheel:function(d){if(!Ue){var w=Kt(D-d.deltaY/100/2,ne/K);j({stopRaf:!0}),ye(w,d.clientX,d.clientY)}},style:{width:me[2]+"px",height:me[3]+"px",opacity:me[5],objectFit:A===4?void 0:me[7],transform:ae?"rotate("+ae+"deg)":void 0,transition:A>2?R+", opacity "+m+"ms ease, height "+(A<4?m/2:A>4?m:0)+"ms "+p:void 0}};return $.createElement("div",{className:"PhotoView__PhotoWrap"+(v?" "+v:""),style:b,onMouseDown:!Pe&&L?Xt:void 0,onTouchStart:Pe&&L?function(d){return Xt(d.touches[0])}:void 0},$.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+N+", 0, 0, "+N+", "+me[0]+", "+me[1]+")",transition:re||oe?void 0:R,willChange:L?"transform":void 0}},n?$.createElement(ea,O({src:n,loaded:be,broken:ue},I,{onPhotoLoad:function(d){j(O({},d,d.loaded&&cn(d.naturalWidth||0,d.naturalHeight||0,ae)))},loadingElement:x,brokenElement:y})):r&&r({attrs:I,scale:N,rotate:ae})))}var Bn={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function ra(e){var t=e.loop,n=t===void 0?3:t,r=e.speed,a=e.easing,i=e.photoClosable,s=e.maskClosable,l=s===void 0||s,c=e.maskOpacity,f=c===void 0?1:c,m=e.pullClosable,p=m===void 0||m,v=e.bannerVisible,g=v===void 0||v,b=e.overlayRender,x=e.toolbarRender,y=e.className,E=e.maskClassName,T=e.photoClassName,h=e.photoWrapClassName,S=e.loadingElement,C=e.brokenElement,L=e.images,W=e.index,Fe=W===void 0?0:W,k=e.onIndexChange,j=e.visible,B=e.onClose,Y=e.afterClose,nt=e.portalContainer,ne=en(Bn),_=ne[0],H=ne[1],Be=u.useState(0),K=Be[0],rt=Be[1],P=_.x,V=_.touched,be=_.pause,ue=_.lastCX,X=_.lastCY,xe=_.bg,re=xe===void 0?f:xe,on=_.lastBg,Le=_.overlay,ae=_.minimal,D=_.scale,_t=_.rotate,at=_.onScale,Ve=_.onRotate,$t=e.hasOwnProperty("index"),M=$t?Fe:K,Ht=$t?k:rt,de=u.useRef(M),Ge=L.length,Dt=L[M],oe=typeof n=="boolean"?n:Ge>n,Ue=function(N,A){var R=u.useReducer(function(F){return!F},!1)[1],I=u.useRef(0),d=function(F){var we=u.useRef(F);function Ee(J){we.current=J}return u.useMemo(function(){(function(J){N?(J(N),I.current=1):I.current=2})(Ee)},[F]),[we.current,Ee]}(N),w=d[1];return[d[0],I.current,function(){R(),I.current===2&&(w(!1),A&&A()),I.current=0}]}(j,Y),jt=Ue[0],ye=Ue[1],Wt=Ue[2];hn(function(){if(jt)return H({pause:!0,x:M*-(innerWidth+ft)}),void(de.current=M);H(Bn)},[jt]);var Nt=Ze({close:function(N){Ve&&Ve(0),H({overlay:!0,lastBg:re}),B(N)},changeIndex:function(N,A){A===void 0&&(A=!1);var R=oe?de.current+(N-M):N,I=Ge-1,d=pn(R,0,I),w=oe?R:d,F=innerWidth+ft;H({touched:!1,lastCX:void 0,lastCY:void 0,x:-F*w,pause:A}),de.current=w,Ht&&Ht(oe?N<0?I:N>I?0:N:d)}}),Ae=Nt.close,fe=Nt.changeIndex;function Me(N){return N?Ae():H({overlay:!Le})}function Tt(){H({x:-(innerWidth+ft)*M,lastCX:void 0,lastCY:void 0,pause:!0}),de.current=M}function Bt(N,A,R,I){N==="x"?function(d){if(ue!==void 0){var w=d-ue,F=w;!oe&&(M===0&&w>0||M===Ge-1&&w<0)&&(F=w/2),H({touched:!0,lastCX:ue,x:-(innerWidth+ft)*de.current+F,pause:!1})}else H({touched:!0,lastCX:d,x:P,pause:!1})}(A):N==="y"&&function(d,w){if(X!==void 0){var F=f===null?null:pn(f,.01,f-Math.abs(d-X)/100/4);H({touched:!0,lastCY:X,bg:w===1?F:f,minimal:w===1})}else H({touched:!0,lastCY:d,bg:re,minimal:!0})}(R,I)}function Vt(N,A){var R=N-(ue??N),I=A-(X??A),d=!1;if(R<-40)fe(M+1);else if(R>40)fe(M-1);else{var w=-(innerWidth+ft)*de.current;Math.abs(I)>100&&ae&&p&&(d=!0,Ae()),H({touched:!1,x:w,lastCX:void 0,lastCY:void 0,bg:f,overlay:!!d||Le})}}ht("keydown",function(N){if(j)switch(N.key){case"ArrowLeft":fe(M-1,!0);break;case"ArrowRight":fe(M+1,!0);break;case"Escape":Ae()}});var Gt=function(N,A,R){return u.useMemo(function(){var I=N.length;return R?N.concat(N).concat(N).slice(I+A-1,I+A+2):N.slice(Math.max(A-1,0),Math.min(A+2,I+1))},[N,A,R])}(L,M,oe);if(!jt)return null;var q=Le&&!ye,Ut=j?re:on,ot=at&&Ve&&{images:L,index:M,visible:j,onClose:Ae,onIndexChange:fe,overlayVisible:q,overlay:Dt&&Dt.overlay,scale:D,rotate:_t,onScale:at,onRotate:Ve},it=r?r(ye):400,St=a?a(ye):Hn,Xt=r?r(3):600,me=a?a(3):Hn;return $.createElement(Gr,{className:"PhotoView-Portal"+(q?"":" PhotoView-Slider__clean")+(j?"":" PhotoView-Slider__willClose")+(y?" "+y:""),role:"dialog",onClick:function(N){return N.stopPropagation()},container:nt},j&&$.createElement(Kr,null),$.createElement("div",{className:"PhotoView-Slider__Backdrop"+(E?" "+E:"")+(ye===1?" PhotoView-Slider__fadeIn":ye===2?" PhotoView-Slider__fadeOut":""),style:{background:Ut?"rgba(0, 0, 0, "+Ut+")":void 0,transitionTimingFunction:St,transitionDuration:(V?0:it)+"ms",animationDuration:it+"ms"},onAnimationEnd:Wt}),g&&$.createElement("div",{className:"PhotoView-Slider__BannerWrap"},$.createElement("div",{className:"PhotoView-Slider__Counter"},M+1," / ",Ge),$.createElement("div",{className:"PhotoView-Slider__BannerRight"},x&&ot&&x(ot),$.createElement(Ur,{className:"PhotoView-Slider__toolbarIcon",onClick:Ae}))),Gt.map(function(N,A){var R=oe||M!==0?de.current-1+A:M+A;return $.createElement(na,{key:oe?N.key+"/"+N.src+"/"+R:N.key,item:N,speed:it,easing:St,visible:j,onReachMove:Bt,onReachUp:Vt,onPhotoTap:function(){return Me(i)},onMaskTap:function(){return Me(l)},wrapClassName:h,className:T,style:{left:(innerWidth+ft)*R+"px",transform:"translate3d("+P+"px, 0px, 0)",transition:V||be?void 0:"transform "+Xt+"ms "+me},loadingElement:S,brokenElement:C,onPhotoResize:Tt,isActive:de.current===R,expose:H})}),!Pe&&g&&$.createElement($.Fragment,null,(oe||M!==0)&&$.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return fe(M-1,!0)}},$.createElement(Xr,null)),(oe||M+1<Ge)&&$.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return fe(M+1,!0)}},$.createElement(Yr,null))),b&&ot&&$.createElement("div",{className:"PhotoView-Slider__Overlay"},b(ot)))}var aa=["children","onIndexChange","onVisibleChange"],oa={images:[],visible:!1,index:0};function ia(e){var t=e.children,n=e.onIndexChange,r=e.onVisibleChange,a=rn(e,aa),i=en(oa),s=i[0],l=i[1],c=u.useRef(0),f=s.images,m=s.visible,p=s.index,v=Ze({nextId:function(){return c.current+=1},update:function(x){var y=f.findIndex(function(T){return T.key===x.key});if(y>-1){var E=f.slice();return E.splice(y,1,x),void l({images:E})}l(function(T){return{images:T.images.concat(x)}})},remove:function(x){l(function(y){var E=y.images.filter(function(T){return T.key!==x});return{images:E,index:Math.min(E.length-1,p)}})},show:function(x){var y=f.findIndex(function(E){return E.key===x});l({visible:!0,index:y}),r&&r(!0,y,s)}}),g=Ze({close:function(){l({visible:!1}),r&&r(!1,p,s)},changeIndex:function(x){l({index:x}),n&&n(x,s)}}),b=u.useMemo(function(){return O({},s,v)},[s,v]);return $.createElement(Kn.Provider,{value:b},t,$.createElement(ra,O({images:f,visible:m,index:p,onIndexChange:g.changeIndex,onClose:g.close},a)))}var Vn=function(e){var t,n,r=e.src,a=e.render,i=e.overlay,s=e.width,l=e.height,c=e.triggers,f=c===void 0?["onClick"]:c,m=e.children,p=u.useContext(Kn),v=(t=function(){return p.nextId()},(n=u.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),g=u.useRef(null);u.useImperativeHandle(m==null?void 0:m.ref,function(){return g.current}),u.useEffect(function(){return function(){p.remove(v)}},[]);var b=Ze({render:function(y){return a&&a(y)},show:function(y,E){p.show(v),function(T,h){if(m){var S=m.props[T];S&&S(h)}}(y,E)}}),x=u.useMemo(function(){var y={};return f.forEach(function(E){y[E]=b.show.bind(null,E)}),y},[]);return u.useEffect(function(){p.update({key:v,src:r,originRef:g,render:b.render,overlay:i,width:s,height:l})},[r]),m?u.Children.only(u.cloneElement(m,O({},x,{ref:g}))):null};const sa=typeof document<"u"?$.useLayoutEffect:()=>{},We=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},Je=e=>e&&"window"in e&&e.window===e?e:We(e).defaultView||window;function la(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function ca(e){return la(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let ua=!1;function Nn(){return ua}function zn(e,t){if(!Nn())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let n=t;for(;n!==null;){if(n===e)return!0;n.tagName==="SLOT"&&n.assignedSlot?n=n.assignedSlot.parentNode:ca(n)?n=n.host:n=n.parentNode}return!1}const vn=(e=document)=>{var t;if(!Nn())return e.activeElement;let n=e.activeElement;for(;n&&"shadowRoot"in n&&(!((t=n.shadowRoot)===null||t===void 0)&&t.activeElement);)n=n.shadowRoot.activeElement;return n};function Qn(e){return Nn()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function da(e){if(fa())e.focus({preventScroll:!0});else{let t=ma(e);e.focus(),pa(t)}}let zt=null;function fa(){if(zt==null){zt=!1;try{document.createElement("div").focus({get preventScroll(){return zt=!0,!0}})}catch{}}return zt}function ma(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function pa(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function an(e){var t;if(typeof window>"u"||window.navigator==null)return!1;let n=(t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands;return Array.isArray(n)&&n.some(r=>e.test(r.brand))||e.test(window.navigator.userAgent)}function Jn(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function yt(e){let t=null;return()=>(t==null&&(t=e()),t)}const tn=yt(function(){return Jn(/^Mac/i)}),ha=yt(function(){return Jn(/^iPad/i)||tn()&&navigator.maxTouchPoints>1}),ga=yt(function(){return an(/AppleWebKit/i)&&!va()}),va=yt(function(){return an(/Chrome/i)}),ba=yt(function(){return an(/Android/i)}),xa=yt(function(){return an(/Firefox/i)});function Mt(e,t,n=!0){var r,a;let{metaKey:i,ctrlKey:s,altKey:l,shiftKey:c}=t;xa()&&(!((a=window.event)===null||a===void 0||(r=a.type)===null||r===void 0)&&r.startsWith("key"))&&e.target==="_blank"&&(tn()?i=!0:s=!0);let f=ga()&&tn()&&!ha()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:i,ctrlKey:s,altKey:l,shiftKey:c}):new MouseEvent("click",{metaKey:i,ctrlKey:s,altKey:l,shiftKey:c,detail:1,bubbles:!0,cancelable:!0});Mt.isOpening=n,da(e),e.dispatchEvent(f),Mt.isOpening=!1}Mt.isOpening=!1;function Zn(){let e=u.useRef(new Map),t=u.useCallback((a,i,s,l)=>{let c=l!=null&&l.once?(...f)=>{e.current.delete(s),s(...f)}:s;e.current.set(s,{type:i,eventTarget:a,fn:c,options:l}),a.addEventListener(i,c,l)},[]),n=u.useCallback((a,i,s,l)=>{var c;let f=((c=e.current.get(s))===null||c===void 0?void 0:c.fn)||s;a.removeEventListener(i,f,l),e.current.delete(s)},[]),r=u.useCallback(()=>{e.current.forEach((a,i)=>{n(a.eventTarget,a.type,i,a.options)})},[n]);return u.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function ya(e){return e.pointerType===""&&e.isTrusted?!0:ba()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function er(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function wa(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function tr(e){let t=u.useRef({isFocused:!1,observer:null});return sa(()=>{const n=t.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]),u.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=n.target,a=i=>{if(t.current.isFocused=!1,r.disabled){let s=er(i);e==null||e(s)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",a,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&r.disabled){var i;(i=t.current.observer)===null||i===void 0||i.disconnect();let s=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:s})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:s}))}}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[e])}let Ea=!1,It=null,bn=new Set,At=new Map,tt=!1,xn=!1;const $a={Tab:!0,Escape:!0};function Tn(e,t){for(let n of bn)n(e,t)}function ja(e){return!(e.metaKey||!tn()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function nn(e){tt=!0,!Mt.isOpening&&ja(e)&&(It="keyboard",Tn("keyboard",e))}function vt(e){It="pointer","pointerType"in e&&e.pointerType,(e.type==="mousedown"||e.type==="pointerdown")&&(tt=!0,Tn("pointer",e))}function nr(e){!Mt.isOpening&&ya(e)&&(tt=!0,It="virtual")}function rr(e){e.target===window||e.target===document||Ea||!e.isTrusted||(!tt&&!xn&&(It="virtual",Tn("virtual",e)),tt=!1,xn=!1)}function ar(){tt=!1,xn=!0}function yn(e){if(typeof window>"u"||typeof document>"u"||At.get(Je(e)))return;const t=Je(e),n=We(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){tt=!0,r.apply(this,arguments)},n.addEventListener("keydown",nn,!0),n.addEventListener("keyup",nn,!0),n.addEventListener("click",nr,!0),t.addEventListener("focus",rr,!0),t.addEventListener("blur",ar,!1),typeof PointerEvent<"u"&&(n.addEventListener("pointerdown",vt,!0),n.addEventListener("pointermove",vt,!0),n.addEventListener("pointerup",vt,!0)),t.addEventListener("beforeunload",()=>{or(e)},{once:!0}),At.set(t,{focus:r})}const or=(e,t)=>{const n=Je(e),r=We(e);t&&r.removeEventListener("DOMContentLoaded",t),At.has(n)&&(n.HTMLElement.prototype.focus=At.get(n).focus,r.removeEventListener("keydown",nn,!0),r.removeEventListener("keyup",nn,!0),r.removeEventListener("click",nr,!0),n.removeEventListener("focus",rr,!0),n.removeEventListener("blur",ar,!1),typeof PointerEvent<"u"&&(r.removeEventListener("pointerdown",vt,!0),r.removeEventListener("pointermove",vt,!0),r.removeEventListener("pointerup",vt,!0)),At.delete(n))};function Na(e){const t=We(e);let n;return t.readyState!=="loading"?yn(e):(n=()=>{yn(e)},t.addEventListener("DOMContentLoaded",n)),()=>or(e,n)}typeof document<"u"&&Na();function ir(){return It!=="pointer"}const Ta=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Sa(e,t,n){let r=We(n==null?void 0:n.target);const a=typeof window<"u"?Je(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?Je(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?Je(n==null?void 0:n.target).HTMLElement:HTMLElement,l=typeof window<"u"?Je(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof a&&!Ta.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof s&&r.activeElement.isContentEditable,!(e&&t==="keyboard"&&n instanceof l&&!$a[n.key])}function ka(e,t,n){yn(),u.useEffect(()=>{let r=(a,i)=>{Sa(!!(n!=null&&n.isTextInput),a,i)&&e(ir())};return bn.add(r),()=>{bn.delete(r)}},t)}function Ca(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:a}=e;const i=u.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),a&&a(!1),!0},[r,a]),s=tr(i),l=u.useCallback(c=>{const f=We(c.target),m=f?vn(f):vn();c.target===c.currentTarget&&m===Qn(c.nativeEvent)&&(n&&n(c),a&&a(!0),s(c))},[a,n,s]);return{focusProps:{onFocus:!t&&(n||a||r)?l:void 0,onBlur:!t&&(r||a)?i:void 0}}}function Pa(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:a}=e,i=u.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:l}=Zn(),c=u.useCallback(p=>{p.currentTarget.contains(p.target)&&i.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(i.current.isFocusWithin=!1,l(),n&&n(p),a&&a(!1))},[n,a,i,l]),f=tr(c),m=u.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const v=We(p.target),g=vn(v);if(!i.current.isFocusWithin&&g===Qn(p.nativeEvent)){r&&r(p),a&&a(!0),i.current.isFocusWithin=!0,f(p);let b=p.currentTarget;s(v,"focus",x=>{if(i.current.isFocusWithin&&!zn(b,x.target)){let y=new v.defaultView.FocusEvent("blur",{relatedTarget:x.target});wa(y,b);let E=er(y);c(E)}},{capture:!0})}},[r,a,f,s,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:m,onBlur:c}}}let wn=!1,Qt=0;function Fa(){wn=!0,setTimeout(()=>{wn=!1},50)}function Gn(e){e.pointerType==="touch"&&Fa()}function La(){if(!(typeof document>"u"))return Qt===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",Gn),Qt++,()=>{Qt--,!(Qt>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",Gn)}}function Aa(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:a}=e,[i,s]=u.useState(!1),l=u.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;u.useEffect(La,[]);let{addGlobalListener:c,removeAllGlobalListeners:f}=Zn(),{hoverProps:m,triggerHoverEnd:p}=u.useMemo(()=>{let v=(x,y)=>{if(l.pointerType=y,a||y==="touch"||l.isHovered||!x.currentTarget.contains(x.target))return;l.isHovered=!0;let E=x.currentTarget;l.target=E,c(We(x.target),"pointerover",T=>{l.isHovered&&l.target&&!zn(l.target,T.target)&&g(T,T.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:E,pointerType:y}),n&&n(!0),s(!0)},g=(x,y)=>{let E=l.target;l.pointerType="",l.target=null,!(y==="touch"||!l.isHovered||!E)&&(l.isHovered=!1,f(),r&&r({type:"hoverend",target:E,pointerType:y}),n&&n(!1),s(!1))},b={};return typeof PointerEvent<"u"&&(b.onPointerEnter=x=>{wn&&x.pointerType==="mouse"||v(x,x.pointerType)},b.onPointerLeave=x=>{!a&&x.currentTarget.contains(x.target)&&g(x,x.pointerType)}),{hoverProps:b,triggerHoverEnd:g}},[t,n,r,a,l,c,f]);return u.useEffect(()=>{a&&p({currentTarget:l.target},l.pointerType)},[a]),{hoverProps:m,isHovered:i}}function sr(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,a=u.useRef({isFocused:!1,isFocusVisible:t||ir()}),[i,s]=u.useState(!1),[l,c]=u.useState(()=>a.current.isFocused&&a.current.isFocusVisible),f=u.useCallback(()=>c(a.current.isFocused&&a.current.isFocusVisible),[]),m=u.useCallback(g=>{a.current.isFocused=g,s(g),f()},[f]);ka(g=>{a.current.isFocusVisible=g,f()},[],{isTextInput:n});let{focusProps:p}=Ca({isDisabled:r,onFocusChange:m}),{focusWithinProps:v}=Pa({isDisabled:!r,onFocusWithinChange:m});return{isFocused:i,isFocusVisible:l,focusProps:r?v:p}}var Ma=Object.defineProperty,Ia=(e,t,n)=>t in e?Ma(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,un=(e,t,n)=>(Ia(e,typeof t!="symbol"?t+"":t,n),n);let Ra=class{constructor(){un(this,"current",this.detect()),un(this,"handoffState","pending"),un(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Sn=new Ra;function Oa(e){var t;return Sn.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function En(e){var t,n;return Sn.isServer?null:e==null?document:(n=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?n:document}function lr(e){var t,n;return(n=(t=En(e))==null?void 0:t.activeElement)!=null?n:null}function cr(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ur(){let e=[],t={addEventListener(n,r,a,i){return n.addEventListener(r,a,i),t.add(()=>n.removeEventListener(r,a,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return cr(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=ur();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function _a(){let[e]=u.useState(ur);return u.useEffect(()=>()=>e.dispose(),[e]),e}let bt=(e,t)=>{Sn.isServer?u.useEffect(e,t):u.useLayoutEffect(e,t)};function Ft(e){let t=u.useRef(e);return bt(()=>{t.current=e},[e]),t}let ve=function(e){let t=Ft(e);return $.useCallback((...n)=>t.current(...n),[t])};function Ha(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function Da(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function Wa({disabled:e=!1}={}){let t=u.useRef(null),[n,r]=u.useState(!1),a=_a(),i=ve(()=>{t.current=null,r(!1),a.dispose()}),s=ve(l=>{if(a.dispose(),t.current===null){t.current=l.currentTarget,r(!0);{let c=Oa(l.currentTarget);a.addEventListener(c,"pointerup",i,!1),a.addEventListener(c,"pointermove",f=>{if(t.current){let m=Ha(f);r(Da(m,t.current.getBoundingClientRect()))}},!1),a.addEventListener(c,"pointercancel",i,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:s,onPointerUp:i,onClick:i}}}function Rt(e){return u.useMemo(()=>e,Object.values(e))}function Un(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function et(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,et),r}var $n=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))($n||{}),Ba=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ba||{});function wt(){let e=Ga();return u.useCallback(t=>Va({mergeRefs:e,...t}),[e])}function Va({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:i=!0,name:s,mergeRefs:l}){l=l??Ua;let c=dr(t,e);if(i)return Jt(c,n,r,s,l);let f=a??0;if(f&2){let{static:m=!1,...p}=c;if(m)return Jt(p,n,r,s,l)}if(f&1){let{unmount:m=!0,...p}=c;return et(m?0:1,{0(){return null},1(){return Jt({...p,hidden:!0,style:{display:"none"}},n,r,s,l)}})}return Jt(c,n,r,s,l)}function Jt(e,t={},n,r,a){let{as:i=n,children:s,refName:l="ref",...c}=dn(e,["unmount","static"]),f=e.ref!==void 0?{[l]:e.ref}:{},m=typeof s=="function"?s(t):s;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let p={};if(t){let v=!1,g=[];for(let[b,x]of Object.entries(t))typeof x=="boolean"&&(v=!0),x===!0&&g.push(b.replace(/([A-Z])/g,y=>`-${y.toLowerCase()}`));if(v){p["data-headlessui-state"]=g.join(" ");for(let b of g)p[`data-${b}`]=""}}if(Zt(i)&&(Object.keys(mt(c)).length>0||Object.keys(mt(p)).length>0))if(!u.isValidElement(m)||Array.isArray(m)&&m.length>1||Ya(m)){if(Object.keys(mt(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(mt(c)).concat(Object.keys(mt(p))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=m.props,g=v==null?void 0:v.className,b=typeof g=="function"?(...E)=>Un(g(...E),c.className):Un(g,c.className),x=b?{className:b}:{},y=dr(m.props,mt(dn(c,["ref"])));for(let E in p)E in y&&delete p[E];return u.cloneElement(m,Object.assign({},y,p,f,{ref:a(Xa(m),f.ref)},x))}return u.createElement(i,Object.assign({},dn(c,["ref"]),!Zt(i)&&f,!Zt(i)&&p),m)}function Ga(){let e=u.useRef([]),t=u.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function Ua(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function dr(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[a=>{var i;return(i=a==null?void 0:a.preventDefault)==null?void 0:i.call(a)}]);for(let r in n)Object.assign(t,{[r](a,...i){let s=n[r];for(let l of s){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;l(a,...i)}}});return t}function fr(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];for(let r in n)Object.assign(t,{[r](...a){let i=n[r];for(let s of i)s==null||s(...a)}});return t}function Et(e){var t;return Object.assign(u.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function mt(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function dn(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Xa(e){return $.version.split(".")[0]>="19"?e.props.ref:e.ref}function Zt(e){return e===u.Fragment||e===Symbol.for("react.fragment")}function Ya(e){return Zt(e.type)}let Ka="span";var mr=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(mr||{});function qa(e,t){var n;let{features:r=1,...a}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return wt()({ourProps:i,theirProps:a,slot:{},defaultTag:Ka,name:"Hidden"})}let pr=Et(qa),za=Symbol();function Ot(...e){let t=u.useRef(e);u.useEffect(()=>{t.current=e},[e]);let n=ve(r=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return e.every(r=>r==null||(r==null?void 0:r[za]))?void 0:n}var le=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(le||{});let Qa=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Ja=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ce=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ce||{}),Lt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Lt||{}),Za=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Za||{});function eo(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Qa)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function to(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ja)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var no=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(no||{}),ro=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ro||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let ao=["textarea","input"].join(",");function oo(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,ao))!=null?n:!1}function gt(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),i=t(r);if(a===null||i===null)return 0;let s=a.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function pt(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){let i=Array.isArray(e)?e.length>0?En(e[0]):document:En(e),s=Array.isArray(e)?n?gt(e):e:t&64?to(e):eo(e);a.length>0&&s.length>1&&(s=s.filter(g=>!a.some(b=>b!=null&&"current"in b?(b==null?void 0:b.current)===g:b===g))),r=r??(i==null?void 0:i.activeElement);let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,s.indexOf(r))-1;if(t&4)return Math.max(0,s.indexOf(r))+1;if(t&8)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},m=0,p=s.length,v;do{if(m>=p||m+p<=0)return 0;let g=c+m;if(t&16)g=(g+p)%p;else{if(g<0)return 3;if(g>=p)return 1}v=s[g],v==null||v.focus(f),m+=l}while(v!==lr(v));return t&6&&oo(v)&&v.select(),2}function io(e,t){return u.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(t==null?void 0:t.tagName)==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function so(){let e=u.useRef(!1);return bt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function lo({onFocus:e}){let[t,n]=u.useState(!0),r=so();return t?$.createElement(pr,{as:"button",type:"button",features:mr.Focusable,onFocus:a=>{a.preventDefault();let i,s=50;function l(){if(s--<=0){i&&cancelAnimationFrame(i);return}if(e()){if(cancelAnimationFrame(i),!r.current)return;n(!1);return}i=requestAnimationFrame(l)}i=requestAnimationFrame(l)}}):null}const hr=u.createContext(null);function co(){return{groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let a=(n=r.get(t))!=null?n:0;r.set(t,a+1);let i=Array.from(r.keys()).indexOf(t);function s(){let l=r.get(t);l>1?r.set(t,l-1):r.delete(t)}return[i,s]}}}function uo({children:e}){let t=u.useRef(co());return u.createElement(hr.Provider,{value:t},e)}function gr(e){let t=u.useContext(hr);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=u.useId(),[r,a]=t.current.get(e,n);return u.useEffect(()=>a,[]),r}var fo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(fo||{}),mo=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(mo||{}),po=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(po||{});let ho={0(e,t){var n;let r=gt(e.tabs,m=>m.current),a=gt(e.panels,m=>m.current),i=r.filter(m=>{var p;return!((p=m.current)!=null&&p.hasAttribute("disabled"))}),s={...e,tabs:r,panels:a};if(t.index<0||t.index>r.length-1){let m=et(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>et(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(i.length===0)return s;let p=et(m,{0:()=>r.indexOf(i[0]),1:()=>r.indexOf(i[i.length-1])});return{...s,selectedIndex:p===-1?e.selectedIndex:p}}let l=r.slice(0,t.index),c=[...r.slice(t.index),...l].find(m=>i.includes(m));if(!c)return s;let f=(n=r.indexOf(c))!=null?n:e.selectedIndex;return f===-1&&(f=e.selectedIndex),{...s,selectedIndex:f}},1(e,t){if(e.tabs.includes(t.tab))return e;let n=e.tabs[e.selectedIndex],r=gt([...e.tabs,t.tab],i=>i.current),a=e.selectedIndex;return e.info.current.isControlled||(a=r.indexOf(n),a===-1&&(a=e.selectedIndex)),{...e,tabs:r,selectedIndex:a}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:gt([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},kn=u.createContext(null);kn.displayName="TabsDataContext";function xt(e){let t=u.useContext(kn);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,xt),n}return t}let Cn=u.createContext(null);Cn.displayName="TabsActionsContext";function Pn(e){let t=u.useContext(Cn);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Pn),n}return t}function go(e,t){return et(t.type,ho,e,t)}let vo="div";function bo(e,t){let{defaultIndex:n=0,vertical:r=!1,manual:a=!1,onChange:i,selectedIndex:s=null,...l}=e;const c=r?"vertical":"horizontal",f=a?"manual":"auto";let m=s!==null,p=Ft({isControlled:m}),v=Ot(t),[g,b]=u.useReducer(go,{info:p,selectedIndex:s??n,tabs:[],panels:[]}),x=Rt({selectedIndex:g.selectedIndex}),y=Ft(i||(()=>{})),E=Ft(g.tabs),T=u.useMemo(()=>({orientation:c,activation:f,...g}),[c,f,g]),h=ve(j=>(b({type:1,tab:j}),()=>b({type:2,tab:j}))),S=ve(j=>(b({type:3,panel:j}),()=>b({type:4,panel:j}))),C=ve(j=>{L.current!==j&&y.current(j),m||b({type:0,index:j})}),L=Ft(m?e.selectedIndex:g.selectedIndex),W=u.useMemo(()=>({registerTab:h,registerPanel:S,change:C}),[]);bt(()=>{b({type:0,index:s??n})},[s]),bt(()=>{if(L.current===void 0||g.tabs.length<=0)return;let j=gt(g.tabs,B=>B.current);j.some((B,Y)=>g.tabs[Y]!==B)&&C(j.indexOf(g.tabs[L.current]))});let Fe={ref:v},k=wt();return $.createElement(uo,null,$.createElement(Cn.Provider,{value:W},$.createElement(kn.Provider,{value:T},T.tabs.length<=0&&$.createElement(lo,{onFocus:()=>{var j,B;for(let Y of E.current)if(((j=Y.current)==null?void 0:j.tabIndex)===0)return(B=Y.current)==null||B.focus(),!0;return!1}}),k({ourProps:Fe,theirProps:l,slot:x,defaultTag:vo,name:"Tabs"}))))}let xo="div";function yo(e,t){let{orientation:n,selectedIndex:r}=xt("Tab.List"),a=Ot(t),i=Rt({selectedIndex:r}),s=e,l={ref:a,role:"tablist","aria-orientation":n};return wt()({ourProps:l,theirProps:s,slot:i,defaultTag:xo,name:"Tabs.List"})}let wo="button";function Eo(e,t){var n,r;let a=u.useId(),{id:i=`headlessui-tabs-tab-${a}`,disabled:s=!1,autoFocus:l=!1,...c}=e,{orientation:f,activation:m,selectedIndex:p,tabs:v,panels:g}=xt("Tab"),b=Pn("Tab"),x=xt("Tab"),[y,E]=u.useState(null),T=u.useRef(null),h=Ot(T,t,E);bt(()=>b.registerTab(T),[b,T]);let S=gr("tabs"),C=v.indexOf(T);C===-1&&(C=S);let L=C===p,W=ve(P=>{let V=P();if(V===Lt.Success&&m==="auto"){let be=lr(T.current),ue=x.tabs.findIndex(X=>X.current===be);ue!==-1&&b.change(ue)}return V}),Fe=ve(P=>{let V=v.map(be=>be.current).filter(Boolean);if(P.key===le.Space||P.key===le.Enter){P.preventDefault(),P.stopPropagation(),b.change(C);return}switch(P.key){case le.Home:case le.PageUp:return P.preventDefault(),P.stopPropagation(),W(()=>pt(V,ce.First));case le.End:case le.PageDown:return P.preventDefault(),P.stopPropagation(),W(()=>pt(V,ce.Last))}if(W(()=>et(f,{vertical(){return P.key===le.ArrowUp?pt(V,ce.Previous|ce.WrapAround):P.key===le.ArrowDown?pt(V,ce.Next|ce.WrapAround):Lt.Error},horizontal(){return P.key===le.ArrowLeft?pt(V,ce.Previous|ce.WrapAround):P.key===le.ArrowRight?pt(V,ce.Next|ce.WrapAround):Lt.Error}}))===Lt.Success)return P.preventDefault()}),k=u.useRef(!1),j=ve(()=>{var P;k.current||(k.current=!0,(P=T.current)==null||P.focus({preventScroll:!0}),b.change(C),cr(()=>{k.current=!1}))}),B=ve(P=>{P.preventDefault()}),{isFocusVisible:Y,focusProps:nt}=sr({autoFocus:l}),{isHovered:ne,hoverProps:_}=Aa({isDisabled:s}),{pressed:H,pressProps:Be}=Wa({disabled:s}),K=Rt({selected:L,hover:ne,active:H,focus:Y,autofocus:l,disabled:s}),rt=fr({ref:h,onKeyDown:Fe,onMouseDown:B,onClick:j,id:i,role:"tab",type:io(e,y),"aria-controls":(r=(n=g[C])==null?void 0:n.current)==null?void 0:r.id,"aria-selected":L,tabIndex:L?0:-1,disabled:s||void 0,autoFocus:l},nt,_,Be);return wt()({ourProps:rt,theirProps:c,slot:K,defaultTag:wo,name:"Tabs.Tab"})}let $o="div";function jo(e,t){let{selectedIndex:n}=xt("Tab.Panels"),r=Ot(t),a=Rt({selectedIndex:n}),i=e,s={ref:r};return wt()({ourProps:s,theirProps:i,slot:a,defaultTag:$o,name:"Tabs.Panels"})}let No="div",To=$n.RenderStrategy|$n.Static;function So(e,t){var n,r,a,i;let s=u.useId(),{id:l=`headlessui-tabs-panel-${s}`,tabIndex:c=0,...f}=e,{selectedIndex:m,tabs:p,panels:v}=xt("Tab.Panel"),g=Pn("Tab.Panel"),b=u.useRef(null),x=Ot(b,t);bt(()=>g.registerPanel(b),[g,b]);let y=gr("panels"),E=v.indexOf(b);E===-1&&(E=y);let T=E===m,{isFocusVisible:h,focusProps:S}=sr(),C=Rt({selected:T,focus:h}),L=fr({ref:x,id:l,role:"tabpanel","aria-labelledby":(r=(n=p[E])==null?void 0:n.current)==null?void 0:r.id,tabIndex:T?c:-1},S),W=wt();return!T&&((a=f.unmount)==null||a)&&!((i=f.static)!=null&&i)?$.createElement(pr,{"aria-hidden":"true",...L}):W({ourProps:L,theirProps:f,slot:C,defaultTag:No,features:To,visible:T,name:"Tabs.Panel"})}let ko=Et(Eo),Co=Et(bo),Po=Et(yo),Fo=Et(jo),Lo=Et(So),Pt=Object.assign(ko,{Group:Co,List:Po,Panels:Fo,Panel:Lo});function Xn(e){const t=e.coupon||e,n=t.title,r=t.description||"",a=t.partnerName||"",i=t.partnerLogo,s=t.discount||"",l=t.ctaUrl;return o.jsx("div",{className:"my-4 overflow-hidden rounded-2xl bg-gradient-to-br from-purple-600 to-indigo-600 text-white shadow-lg",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold",children:n}),r&&o.jsx("p",{className:"text-sm opacity-80",children:r})]}),s&&o.jsx("div",{className:"text-4xl font-extrabold tracking-tighter",children:s})]}),o.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[i?o.jsx("img",{src:i,alt:`${a||""} `,loading:"lazy",decoding:"async",sizes:"40px",className:"mr-3 h-10 w-10 rounded-full object-cover"}):o.jsx("div",{className:"mr-3 h-10 w-10 rounded-full bg-white/20","aria-hidden":"true"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs",children:"Provided by"}),o.jsx("p",{className:"font-semibold",children:a})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[l&&o.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"rounded-full bg-white/20 p-2 transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-indigo-700","aria-label":" ",children:o.jsx(br,{})}),o.jsx("button",{type:"button","aria-label":" ",onClick:()=>{const c=`${n} - ${s}`,f=typeof window<"u"?window.location.href:"";navigator.share?navigator.share({title:n,text:c,url:f}).catch(()=>{}):(navigator.clipboard.writeText(`${c}
${f}`),alert("  ."))},className:"rounded-full bg-white/20 p-2 transition hover:bg-white/30 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 focus-visible:ring-offset-2 focus-visible:ring-offset-indigo-700",children:o.jsx(xr,{})})]})]})]})})}const Ao={:[],:[],:[]};function Mo({spots:e,mode:t,onClose:n}){const[r,a]=u.useState(0);return o.jsx("div",{className:"w-full px-2 py-4 sm:px-0",children:o.jsxs(Pt.Group,{selectedIndex:r,onChange:a,children:[o.jsx(Pt.List,{className:"flex space-x-1 rounded-xl bg-blue-900/20 p-1",children:Object.keys(Ao).map(i=>o.jsx(Pt,{className:({selected:s})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-blue-700
                 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2
                 ${s?"bg-white shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"}`,children:i},i))}),o.jsx(Pt.Panels,{className:"mt-2",children:o.jsx(Pt.Panel,{className:"rounded-xl bg-white p-3",children:o.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4",children:[o.jsx(Xn,{title:" ",description:"  10% ",partnerName:"VN Lounge",partnerLogo:"/logo.png",discount:"10%"}),o.jsx(Xn,{title:" ",description:"   5%",partnerName:"Spa Day",partnerLogo:"",discount:"5%"})]})})})]})})}function Io({spots:e=[],mode:t="explorer",className:n=""}){const[r,a]=u.useState(!1);return o.jsxs("section",{className:`rounded-3xl border border-border bg-surface p-4 md:p-5 shadow-md ${n}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold text-text-main",children:" "}),o.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center gap-2 rounded-full border border-border bg-background-sub px-3 py-1.5 text-sm font-semibold text-text-main hover:bg-background",children:["  ",o.jsx(Or,{})]})]}),o.jsx("p",{className:"mt-1 text-sm text-text-secondary",children:", ,  ,  ,   ."}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs text-text-secondary",children:[o.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-border bg-background-sub px-3 py-2",children:[o.jsx(_n,{})," /"]}),o.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-border bg-background-sub px-3 py-2",children:[o.jsx(_n,{})," /"]})]}),r&&o.jsx(Mo,{spots:e,mode:t,onClose:()=>a(!1)})]})}const Ro=async(e,t)=>{},Oo=async(e,t)=>{};function _o({type:e,spot:t,className:n=""}){return u.useEffect(()=>{t&&Ro(t.id)},[t,e]),t?o.jsxs("div",{className:`relative overflow-hidden rounded-lg shadow-sm border border-orange-100 bg-orange-50 cursor-pointer ${n}`,onClick:()=>Oo(t.id),children:[o.jsxs("div",{className:"flex items-center p-3",children:[o.jsx("span",{className:"text-xs font-bold text-orange-600 bg-orange-100 px-1.5 py-0.5 rounded border border-orange-200 mr-2",children:"AD"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:t.name}),t.description&&o.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.description})]})]}),t.imageUrl&&o.jsx("div",{className:"w-full h-32 overflow-hidden",children:o.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover transition-transform hover:scale-105"})})]}):null}const Ho={lat:21.0278,lng:105.8342};function fn(e){if(typeof(e==null?void 0:e.latitude)=="number"&&typeof(e==null?void 0:e.longitude)=="number")return{lat:e.latitude,lng:e.longitude};if(e!=null&&e.coordinates&&typeof e.coordinates.lat=="number"&&typeof e.coordinates.lng=="number")return{lat:e.coordinates.lat,lng:e.coordinates.lng};if(e!=null&&e.location&&typeof e.location.lat=="number"&&typeof e.location.lng=="number")return{lat:e.location.lat,lng:e.location.lng}}const mn=e=>(e==null?void 0:e.id)??(e==null?void 0:e.firestoreId)??(e==null?void 0:e._id)??(e==null?void 0:e.slug);function Do(e){const t=Yn(),n=yr(),r=e.spots,a=e.spot,i=e.height??480,s=e.zoom??(a?15:12),l=!!e.readOnly,c=u.useMemo(()=>{if(e.center)return e.center;if(a){const b=fn(a);if(b)return b}const v=r==null?void 0:r[0];return(v?fn(v):void 0)??Ho},[e,a,r]),f=u.useMemo(()=>a?[a].filter(Boolean):(r||[]).filter(Boolean),[a,r]),m=u.useMemo(()=>f.map(v=>{const g=fn(v);return g?{lat:g.lat,lng:g.lng,id:String(mn(v)??""),label:(v==null?void 0:v.name)||"",title:(v==null?void 0:v.name)||""}:null}).filter(Boolean),[f]),p=u.useCallback(v=>{var E;const g=f.find(T=>String(mn(T)??"")===String(v.id??""));if(!g)return;const b=mn(g);if((E=e.onSpotSelect)==null||E.call(e,b),l)return;const y=n.pathname.startsWith("/adult")?"/adult/spots":"/spots";b&&t(`${y}/${b}`)},[f,e,l,t,n.pathname]);return o.jsx("div",{className:e.className,style:{height:typeof i=="number"?`${i}px`:i},children:o.jsx(Hr,{className:"w-full h-full",height:"100%",children:o.jsx(Dr,{className:"w-full h-full",center:c,zoom:s,markers:m,onMarkerClick:p,showControls:!0})})})}function Wo(e){if(!e)return"LocalBusiness";const t=e.toLowerCase();return t.includes("hotel")?"Hotel":t.includes("restaurant")||t.includes("food")||t.includes("cafe")?"Restaurant":t.includes("bar")||t.includes("pub")||t.includes("nightclub")?"BarOrPub":"LocalBusiness"}function Bo(e){if(!e)return;const t={mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa",sun:"Su"};return Array.isArray(e)?e.length===0||typeof e[0]=="string"?void 0:e.map(n=>{var r;return{"@type":"OpeningHoursSpecification",dayOfWeek:((r=n.day)==null?void 0:r.slice(0,2).toLowerCase())in t?t[n.day.slice(0,2).toLowerCase()]:void 0,opens:n.open,closes:n.close}}):Object.entries(e).map(([n,r])=>({"@type":"OpeningHoursSpecification",dayOfWeek:t[n]??void 0,...r==="closed"?{}:{opens:r==null?void 0:r.open,closes:r==null?void 0:r.close}}))}function Vo({spot:e,url:t,images:n,averageRating:r,reviewCount:a}){var x,y;const i=`${e.name} | Vietnam Lounge`,s=(e.description||"     .").slice(0,160),l=n&&n.length?n:[e.heroImage,...e.images||[]].filter(Boolean),c=t||(typeof window<"u"?window.location.href:void 0),f=Wo(e.category),m=e.latitude??((x=e.location)==null?void 0:x.lat),p=e.longitude??((y=e.location)==null?void 0:y.lng),v=typeof m=="number"&&typeof p=="number",g=u.useMemo(()=>{var T,h,S;const E={"@context":"https://schema.org","@type":f,name:e.name,description:s,url:c,image:l==null?void 0:l.slice(0,6),telephone:e.phone||((T=e.contact)==null?void 0:T.phone),address:e.address?{"@type":"PostalAddress",streetAddress:e.address}:void 0,geo:v?{"@type":"GeoCoordinates",latitude:m,longitude:p}:void 0,openingHoursSpecification:Bo(e.openingHours),sameAs:e.website||(h=e.contact)!=null&&h.website?[e.website||((S=e.contact)==null?void 0:S.website)]:void 0};return typeof r=="number"&&typeof a=="number"&&(E.aggregateRating={"@type":"AggregateRating",ratingValue:Number(r.toFixed(1)),reviewCount:a}),JSON.stringify(E)},[f,e,s,c,l,v,m,p,r,a]),b=l==null?void 0:l[0];return o.jsx(o.Fragment,{children:o.jsxs(wr,{children:[o.jsx("title",{children:i}),o.jsx("meta",{name:"description",content:s}),c&&o.jsx("link",{rel:"canonical",href:c}),o.jsx("meta",{property:"og:type",content:"website"}),o.jsx("meta",{property:"og:title",content:i}),o.jsx("meta",{property:"og:description",content:s}),b&&o.jsx("meta",{property:"og:image",content:b}),c&&o.jsx("meta",{property:"og:url",content:c}),o.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),o.jsx("meta",{name:"twitter:title",content:i}),o.jsx("meta",{name:"twitter:description",content:s}),b&&o.jsx("meta",{name:"twitter:image",content:b}),o.jsx("script",{type:"application/ld+json",children:g})]})})}const Go=async e=>new Promise(t=>setTimeout(t,300));function Uo({spot:e,className:t=""}){const n=Er(),{isLoggedIn:r}=$r(),[a,i]=u.useState(!1),{mutate:s}=Wr({mutationFn:()=>Go(e.id),onMutate:async()=>{if(!r)throw Qe.error("  ."),new Error("Unauthorized");await n.cancelQueries({queryKey:["favorite",e.id]});const c=a;return i(f=>!f),a||Qe.success("  ! ",{icon:"",style:{borderRadius:"10px",background:"#333",color:"#fff"}}),{previousState:c}},onError:(c,f,m)=>{c.message!=="Unauthorized"&&((m==null?void 0:m.previousState)!==void 0&&i(m.previousState),Qe.error(" .  ."))},onSettled:()=>{n.invalidateQueries({queryKey:["favoriteSpots"]})}}),l=async()=>{const c=window.location.href;try{navigator.share?await navigator.share({title:e.name,text:`[VN Lounge] ${e.name} -    `,url:c}):(await navigator.clipboard.writeText(c),Qe.success(" ."))}catch(f){console.error(f)}};return o.jsxs("div",{className:`flex items-center gap-2 ${t}`,children:[o.jsx("button",{onClick:l,className:"p-2.5 rounded-full text-gray-400 hover:text-blue-500 hover:bg-blue-50 transition-all active:scale-90 bg-gray-50","aria-label":"",children:o.jsx(_r,{size:20})}),o.jsx("button",{onClick:()=>s(),className:`p-2.5 rounded-full transition-all duration-300 active:scale-75 shadow-sm ${a?"text-red-500 bg-red-50 hover:bg-red-100":"text-gray-400 hover:text-red-500 hover:bg-gray-100 bg-gray-50"}`,"aria-label":"  ",children:a?o.jsx(jr,{size:20,className:"animate-heart-pop"}):o.jsx(Nr,{size:20})})]})}function Xo(e,t){var n;try{if(typeof window<"u"&&window.gtag){window.gtag("event",e,t||{});return}if(typeof window<"u"&&((n=window.firebase)!=null&&n.analytics)){window.firebase.analytics().logEvent(e,t||{});return}console.debug("[analytics]",e,t||{})}catch{}}function Yo(e){Xo("sponsor_view",e)}function Ko(e){return e==="nightlife"?"nightlife":"explorer"}async function qo(e,t){const n=jn,r=n.getSpotById||n.fetchSpotById||n.fetchSpot||n.getSpot||(()=>{throw new Error("Spot API: getSpotById/fetchSpotById not found")});try{return await r(e,t)}catch{return await r(e)}}async function zo(e){const t=jn,n=t.getSponsoredSpots||t.fetchSponsoredSpots||t.fetchSponsorSpots||(()=>[]);try{const r=await n(e,10);return Array.isArray(r)?r:[]}catch{try{const r=await n({mode:e,take:10});return Array.isArray(r)?r:[]}catch{try{const r=await n("slider",e);return Array.isArray(r)?r:[]}catch{return[]}}}}async function Qo(e,t){const n=jn,r=n.getSpotReviews||n.fetchSpotReviews||n.fetchReviews||(()=>[]);try{const a=await r(e,t);return Array.isArray(a)?a:[]}catch{try{const a=await r(t,e);return Array.isArray(a)?a:[]}catch{const a=await r(e);return Array.isArray(a)?a:[]}}}const fi=()=>{var T;const{spotId:e}=Tr(),t=Yn(),{contentMode:n}=Sr(),r=Ko(n),{data:a,isLoading:i,isError:s}=sn({queryKey:["spot",e,r],queryFn:()=>qo(e,r),enabled:!!e}),{data:l=[]}=sn({queryKey:["sponsored-spots",r],queryFn:()=>zo(r)}),{data:c=[]}=sn({queryKey:["reviews",e,r],queryFn:()=>Qo(e,r),enabled:!!e});u.useEffect(()=>{a&&a.isSponsored&&Yo(a.id)},[a]);const f=u.useMemo(()=>{const h=a,S=Array.isArray(h==null?void 0:h.images)&&h.images||Array.isArray(h==null?void 0:h.imageUrls)&&h.imageUrls||(typeof(h==null?void 0:h.heroImage)=="string"&&h.heroImage?[h.heroImage]:[])||(typeof(h==null?void 0:h.imageUrl)=="string"&&h.imageUrl?[h.imageUrl]:[]);return S.length?S:["/placeholders/spot.jpg"]},[a]),m=u.useMemo(()=>!!(a!=null&&a.openHours),[a]),p=u.useMemo(()=>{var S,C,L;const h=a;return(h==null?void 0:h.latitude)??((S=h==null?void 0:h.location)==null?void 0:S.lat)??((C=h==null?void 0:h.location)==null?void 0:C.latitude)??((L=h==null?void 0:h.geo)==null?void 0:L.lat)??null},[a]),v=u.useMemo(()=>{var S,C,L;const h=a;return(h==null?void 0:h.longitude)??((S=h==null?void 0:h.location)==null?void 0:S.lng)??((C=h==null?void 0:h.location)==null?void 0:C.longitude)??((L=h==null?void 0:h.geo)==null?void 0:L.lng)??null},[a]),g=()=>{var S;if(!p||!v){Qe.error("   Grab   .");return}if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent))window.location.href=`grab://open?screenType=BOOKING&drop_lat=${p}&drop_long=${v}`;else{const C=a;navigator.clipboard.writeText((C==null?void 0:C.address)||((S=C==null?void 0:C.location)==null?void 0:S.address)||(C==null?void 0:C.name)||""),Qe.success(" ! Grab  .")}},b=()=>{!p||!v||window.open(`https://www.google.com/maps/dir/?api=1&destination=${p},${v}`,"_blank")},x=()=>{Qe.success(" ! (  )",{icon:"",style:{borderRadius:"10px",background:"#333",color:"#fff"}})},y=()=>{const h=`[] ${a==null?void 0:a.name} (${a==null?void 0:a.id})`;window.open(`mailto:support@vnlounge.com?subject=${encodeURIComponent(h)}&body=${encodeURIComponent("   (: ,   ).")}`)};if(i)return o.jsx("div",{className:"flex h-screen items-center justify-center",children:o.jsx(Br,{})});if(s||!a)return o.jsx("div",{className:"flex h-[50vh] items-center justify-center text-gray-500",children:"   ."});const E=a.services??[];return o.jsxs(ia,{children:[o.jsx(Vo,{spot:a}),o.jsxs("div",{className:"min-h-screen bg-white pb-20 font-sans",children:[o.jsxs("div",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-100 px-4 md:px-10 py-3 flex items-center justify-between shadow-sm transition-all",children:[o.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-1 text-gray-600 hover:text-primary transition-colors text-sm font-medium",children:[o.jsx(kr,{})," "]}),o.jsx("h2",{className:"text-sm font-bold text-gray-800 truncate max-w-[150px] opacity-0 md:opacity-100 transition-opacity",children:a.name}),o.jsx(Uo,{spot:a,className:"flex gap-2"})]}),o.jsx("div",{className:"max-w-7xl mx-auto mt-6 px-4 md:px-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[o.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-2 rounded-2xl overflow-hidden aspect-[16/9] shadow-inner bg-gray-100 relative",children:[o.jsxs("div",{className:"col-span-4 md:col-span-3 relative group cursor-pointer h-full",children:[o.jsx(Vn,{src:f[0],children:o.jsx("img",{src:f[0],alt:"main",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"})}),o.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/60 text-white text-xs px-3 py-1.5 rounded-full backdrop-blur-sm flex items-center gap-1.5 pointer-events-none",children:[o.jsx(Cr,{})," ",o.jsx("span",{children:" "})]})]}),o.jsx("div",{className:"hidden md:flex flex-col gap-2 h-full",children:f.slice(1,4).map((h,S)=>o.jsx(Vn,{src:h,children:o.jsx("div",{className:"relative flex-1 cursor-pointer overflow-hidden group",children:o.jsx("img",{src:h,alt:`sub-${S}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"})})},S))})]}),o.jsxs("div",{className:"border-b border-gray-100 pb-8",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[o.jsx("span",{className:"inline-block px-3 py-1 bg-primary/10 text-primary text-xs font-bold rounded-full",children:a.category}),m&&o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-green-50 text-green-600 text-xs font-bold rounded-full border border-green-100",children:[o.jsxs("span",{className:"relative flex h-2 w-2",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})," "]})]}),o.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 leading-tight mb-4 tracking-tight",children:a.name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Pr,{className:"text-yellow-400",size:16}),o.jsx("span",{className:"font-bold text-gray-900 text-lg",children:typeof a.rating=="number"?a.rating.toFixed(1):"0.0"}),o.jsxs("span",{className:"text-gray-400 underline cursor-pointer hover:text-gray-800",children:[" ",c.length,""]})]}),o.jsxs("div",{className:"flex items-center gap-1.5 hover:text-primary transition-colors cursor-pointer group",onClick:b,children:[o.jsx(Mn,{className:"text-gray-400 group-hover:text-primary"}),o.jsx("span",{children:a.address||((T=a.location)==null?void 0:T.address)||"  "})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 lg:hidden",children:[o.jsxs("button",{onClick:x,className:"col-span-2 flex items-center justify-center gap-2 py-3 bg-gray-900 text-white rounded-xl font-bold shadow-md active:scale-95 transition-transform",children:[o.jsx(In,{}),"  "]}),o.jsxs("button",{onClick:g,className:"flex flex-col items-center justify-center py-3 bg-green-50 text-green-700 rounded-xl font-medium border border-green-100 active:bg-green-100 transition-colors",children:[o.jsx(Rn,{className:"text-xl mb-1"})," Grab"]}),o.jsxs("button",{onClick:b,className:"flex flex-col items-center justify-center py-3 bg-blue-50 text-blue-700 rounded-xl font-medium border border-blue-100 active:bg-blue-100 transition-colors",children:[o.jsx(On,{className:"text-xl mb-1"})," "]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:""}),o.jsx("div",{className:"prose prose-lg max-w-none text-gray-600 leading-relaxed bg-gray-50/50 p-6 rounded-2xl border border-gray-100",children:a.description||"  ."})]}),E.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"  & "}),o.jsx("div",{className:"flex flex-wrap gap-3",children:E.map((h,S)=>o.jsxs("span",{className:"px-4 py-2 bg-white text-gray-700 rounded-xl text-sm font-medium border border-gray-200 shadow-sm flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-primary/60"}),h]},S))})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Mn,{className:"text-primary"})," "]}),o.jsx("div",{className:"h-[400px] rounded-2xl overflow-hidden border border-gray-200 shadow-sm relative z-0",children:p&&v?o.jsx(Do,{spot:a,className:"h-full w-full"},a.id):o.jsx("div",{className:"flex h-full items-center justify-center bg-gray-50 text-gray-400",children:"  "})})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(Fr,{className:"text-primary"}),"   ",o.jsxs("span",{className:"text-primary",children:["(",c.length,")"]})]}),o.jsx("button",{className:"px-5 py-2.5 bg-gray-900 text-white text-sm font-bold rounded-xl hover:bg-gray-800 transition shadow-lg shadow-gray-200/50",children:" "})]}),o.jsx("div",{className:"space-y-4",children:c.length>0?c.map(h=>{var S;return o.jsxs("div",{className:"p-5 bg-white rounded-2xl border border-gray-100 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between mb-2",children:[o.jsx("span",{className:"font-bold text-gray-900",children:h.userName||h.displayName}),o.jsx("span",{className:"text-xs text-gray-400",children:h.createdAt?new Date((S=h.createdAt)!=null&&S.seconds?h.createdAt.seconds*1e3:h.createdAt).toLocaleDateString():""})]}),o.jsx("p",{className:"text-gray-600",children:h.content||h.comment})]},h.id)}):o.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:o.jsx("p",{className:"text-gray-400",children:"    !"})})})]})]}),o.jsx("aside",{className:"hidden lg:block lg:col-span-4 space-y-6",children:o.jsxs("div",{className:"sticky top-24 space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-3xl shadow-xl shadow-gray-200/50 border border-gray-100 p-6 overflow-hidden relative",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-primary to-blue-400"}),o.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[o.jsx(Lr,{className:"text-primary"}),"  "]}),o.jsxs("div",{className:"space-y-6 mb-8",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-green-50 flex items-center justify-center text-green-600 shrink-0",children:o.jsx(Ar,{})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"OPEN HOURS"}),o.jsx("p",{className:"text-gray-700 font-medium text-sm",children:a.openHours||"  "})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 shrink-0",children:o.jsx(Mr,{})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:"PHONE"}),o.jsx("p",{className:"text-gray-700 font-medium text-sm",children:a.phone||" "})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-gray-900 text-white font-bold rounded-xl shadow-lg hover:bg-gray-800 transition-all active:scale-95",children:[o.jsx(In,{}),"  "]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:g,className:"flex items-center justify-center gap-2 py-3 bg-green-50 text-green-700 font-bold rounded-xl border border-green-100 hover:bg-green-100 transition-colors",children:[o.jsx(Rn,{})," Grab "]}),o.jsxs("button",{onClick:b,className:"flex items-center justify-center gap-2 py-3 bg-blue-50 text-blue-700 font-bold rounded-xl border border-blue-100 hover:bg-blue-100 transition-colors",children:[o.jsx(On,{})," "]})]})]})]}),o.jsxs("button",{onClick:y,className:"w-full py-3 text-xs text-gray-400 hover:text-gray-600 underline flex items-center justify-center gap-1 transition-colors",children:[o.jsx(Ir,{}),"  ?  "]}),o.jsx(_o,{type:"sidebar",spot:a}),o.jsx(Io,{spots:l,mode:r})]})})]})})]})]})};export{fi as default};
