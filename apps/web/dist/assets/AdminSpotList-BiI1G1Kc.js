import{f as j,j as e,F as b,aE as N,aF as v,am as w,z as n}from"./index-DbUEaAMy.js";import{r as t}from"./react-Dp4Gqg7U.js";import{a as S,d as F}from"./admin.api-hQNrEoI-.js";import"./firebase-Co7q5P-C.js";import"./firebase-CmtxdFcx.js";function D(){const i=j(),[m,o]=t.useState([]),[p,d]=t.useState(!1),[r,h]=t.useState(""),[a,g]=t.useState({mode:"explorer",region:"ALL",category:"ALL",page:1,limit:50}),c=async()=>{d(!0);try{const{data:s}=await S(a);o(s)}catch{n.error("목록을 불러오지 못했습니다.")}finally{d(!1)}};t.useEffect(()=>{c()},[a]);const u=async(s,l)=>{if(window.confirm("정말 삭제하시겠습니까?"))try{await F(s,l==="nightlife"?"nightlife":"explorer"),o(x=>x.filter(f=>f.id!==s)),n.success("삭제되었습니다.")}catch{n.error("삭제 실패")}},y=m.filter(s=>!r||s.name&&s.name.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"장소(Spot) 관리"}),e.jsx("button",{onClick:()=>i("/admin/spots/new"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-blue-700 transition",children:"+ 장소 등록"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 mb-6 flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(b,{className:"absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"장소명 검색...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 py-2 rounded-lg border border-gray-300 outline-none",value:a.mode,onChange:s=>g(l=>({...l,mode:s.target.value})),children:[e.jsx("option",{value:"explorer",children:"Explorer (Day)"}),e.jsx("option",{value:"nightlife",children:"Nightlife (Night)"})]}),e.jsx("button",{onClick:c,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:e.jsx(N,{})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:p?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"로딩 중..."}):e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 text-sm uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3",children:"장소명"}),e.jsx("th",{className:"px-6 py-3",children:"지역 / 카테고리"}),e.jsx("th",{className:"px-6 py-3",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"관리"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-gray-800",children:s.name}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[s.region||"-"," ",e.jsx("span",{className:"text-gray-300",children:"|"})," ",s.category||"-"]}),e.jsx("td",{className:"px-6 py-4",children:s.isSponsored&&e.jsx("span",{className:"bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-bold",children:"AD"})}),e.jsxs("td",{className:"px-6 py-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(`/admin/spots/${s.id}/edit`),className:"p-2 text-blue-500 hover:bg-blue-50 rounded transition",children:e.jsx(v,{})}),e.jsx("button",{onClick:()=>u(s.id,a.mode),className:"p-2 text-red-500 hover:bg-red-50 rounded transition",children:e.jsx(w,{})})]})]},s.id))})]})})]})}export{D as default};
