import{h as b,j as e,ad as y,L as f,s as j,c as v,G as N,z as x}from"./index-DbUEaAMy.js";import{u as k}from"./useQuery-BhrWanxj.js";import{u as w}from"./useMutation-C76_koY-.js";import{r as c}from"./react-Dp4Gqg7U.js";import{r as L,b as M}from"./user.api-DrmP_lWn.js";import{L as A}from"./Loading-sQkuDrhk.js";import"./api-Czske0s_.js";const F=(i,s)=>{if(s&&["ë¶ë¶€","ì¤‘ë¶€","ë‚¨ë¶€"].includes(s))return s;const t=i.toLowerCase();return t.includes("hanoi")||t.includes("í•˜ë…¸ì´")||t.includes("sapa")?"ë¶ë¶€":t.includes("danang")||t.includes("ë‹¤ë‚­")||t.includes("hoi an")?"ì¤‘ë¶€":t.includes("ho chi minh")||t.includes("í˜¸ì¹˜ë¯¼")||t.includes("phu quoc")?"ë‚¨ë¶€":"ê¸°íƒ€"},Q=()=>{const i=b(),[s,t]=c.useState("ALL"),{data:a=[],isLoading:g,isError:m}=k({queryKey:["favoriteSpots"],queryFn:M}),p=w({mutationFn:L,onSuccess:()=>{i.invalidateQueries({queryKey:["favoriteSpots"]}),x.success("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")},onError:()=>x.error("ì‚­ì œ ì‹¤íŒ¨")}),h=(r,o)=>{r.preventDefault(),r.stopPropagation(),window.confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&p.mutate(o)},l=c.useMemo(()=>{if(a.length===0)return null;const r={};a.forEach(n=>{const d=n.category||"ê¸°íƒ€";r[d]=(r[d]||0)+1});const o=Object.keys(r).reduce((n,d)=>r[n]>r[d]?n:d);return{category:o,count:r[o],total:a.length}},[a]),u=c.useMemo(()=>s==="ALL"?a:a.filter(r=>(r.region||F(r.address||"",r.region))===s),[a,s]);return g?e.jsx("div",{className:"h-96 flex items-center justify-center",children:e.jsx(A,{})}):m?e.jsx("div",{className:"py-20 text-center text-gray-500",children:"ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨"}):e.jsxs("div",{className:"max-w-5xl mx-auto px-4 pb-20",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"ë‚˜ì˜ ê´€ì‹¬ ì¥ì†Œ ğŸ’"}),l?e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 p-5 rounded-2xl border border-purple-100 dark:border-purple-800/30 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white dark:bg-gray-800 rounded-full text-purple-500",children:e.jsx(y,{size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:["íšŒì›ë‹˜ì€ ",e.jsxs("span",{className:"text-purple-600",children:["'",l.category,"'"]})," ì „ë¬¸ê°€!"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ì „ì²´ ",l.total,"ê°œ ì¤‘ ",l.count,"ê°œê°€ ",l.category,"ì…ë‹ˆë‹¤."]})]})]}):e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-5 rounded-2xl text-center text-gray-500",children:"ì €ì¥ëœ ì¥ì†Œê°€ ì—†ìŠµë‹ˆë‹¤."})]}),a.length>0&&e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto no-scrollbar pb-2",children:["ALL","ë¶ë¶€","ì¤‘ë¶€","ë‚¨ë¶€"].map(r=>e.jsx("button",{onClick:()=>t(r),className:`px-4 py-2 rounded-full text-sm font-bold border transition-all ${s===r?"bg-gray-900 text-white border-gray-900 dark:bg-white dark:text-gray-900":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700"}`,children:r},r))}),u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:u.map(r=>e.jsxs(f,{to:r.mode==="nightlife"?`/adult/spots/${r.id}`:`/spots/${r.id}`,className:"group relative bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden hover:shadow-xl transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gray-200 relative",children:[e.jsx("img",{src:r.thumbnail||"/placeholders/spot.jpg",alt:r.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("button",{onClick:o=>h(o,r.id),className:"absolute top-3 right-3 p-2 bg-white/90 rounded-full text-red-500 shadow-sm hover:bg-red-50",children:e.jsx(j,{size:14})}),e.jsx("span",{className:`absolute top-3 left-3 px-2 py-1 text-[10px] font-bold rounded-md backdrop-blur-md text-white ${r.mode==="nightlife"?"bg-purple-600/80":"bg-emerald-600/80"}`,children:r.mode==="nightlife"?"Night":"Day"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("span",{className:"text-xs font-bold text-primary mb-1 block",children:r.category}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:r.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-2 gap-1",children:[e.jsx(v,{size:12})," ",e.jsx("span",{className:"truncate",children:r.address})]})]})]},r.id))}):e.jsxs("div",{className:"py-20 text-center border-2 border-dashed border-gray-200 rounded-3xl",children:[e.jsx(N,{className:"mx-auto text-3xl text-gray-300 mb-2"}),e.jsx("p",{children:"ì €ì¥ëœ ì¥ì†Œê°€ ì—†ìŠµë‹ˆë‹¤."})]})]})};export{Q as default};
