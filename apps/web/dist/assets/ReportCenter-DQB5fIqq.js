import{j as e,G as h,aQ as p,aR as f,am as j,aS as b,z as n}from"./index-DbUEaAMy.js";import{r as l}from"./react-Dp4Gqg7U.js";import{l as u,p as y}from"./admin.api-hQNrEoI-.js";import"./firebase-Co7q5P-C.js";import"./firebase-CmtxdFcx.js";function k(){const[i,c]=l.useState([]),[o,x]=l.useState(!0),d=async()=>{try{x(!0);const s=await u();c(s)}catch(s){console.error(s),n.error("신고 목록을 불러오지 못했습니다.")}finally{x(!1)}};l.useEffect(()=>{d()},[]);const m=async(s,t)=>{const r=t==="delete"?"정말 해당 콘텐츠를 삭제하고 신고를 처리하시겠습니까?":"신고를 반려(기각) 하시겠습니까?";if(window.confirm(r))try{await y(s,t),n.success(t==="delete"?"콘텐츠가 삭제되었습니다.":"신고가 반려되었습니다."),c(a=>a.filter(g=>g.id!==s))}catch{n.error("처리 중 오류가 발생했습니다.")}};return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(h,{className:"text-red-500"}),"신고 관리 센터"]}),e.jsx("button",{onClick:d,className:"text-sm text-blue-600 hover:underline",children:"새로고침"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:o?e.jsx("div",{className:"p-12 text-center text-gray-500",children:"데이터를 불러오는 중..."}):i.length===0?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(p,{className:"mx-auto text-4xl text-green-400 mb-4"}),e.jsx("p",{children:"접수된 미처리 신고가 없습니다."})]}):e.jsx("ul",{className:"divide-y divide-gray-100",children:i.map(s=>{var t,r,a;return e.jsx("li",{className:"p-6 hover:bg-gray-50 transition",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-semibold bg-red-50 text-red-700 border border-red-100",children:s.targetType.toUpperCase()}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleString()}),e.jsxs("span",{className:"text-xs text-gray-400",children:["신고자: ",(s.reportedBy||"").slice(0,8),"..."]})]}),e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:["사유: ",s.reason]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 whitespace-pre-wrap",children:s.description}),((t=s.targetContent)==null?void 0:t.title)&&e.jsxs("p",{className:"text-sm text-gray-800 mb-1",children:[e.jsx("span",{className:"font-semibold",children:"대상 제목:"})," ",s.targetContent.title]}),((r=s.targetContent)==null?void 0:r.content)&&e.jsxs("p",{className:"text-sm text-gray-700 mb-2 whitespace-pre-wrap",children:[e.jsx("span",{className:"font-semibold",children:"대상 내용:"})," ",s.targetContent.content]}),((a=s.targetContent)==null?void 0:a.image)&&e.jsx("img",{src:s.targetContent.image,alt:"target",className:"mt-2 w-40 h-28 object-cover rounded-lg border border-gray-200"})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end min-w-[160px]",children:[e.jsxs("a",{href:`/${s.targetType}s/${s.targetId}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[e.jsx(f,{}),"대상 보기"]}),e.jsxs("button",{onClick:()=>m(s.id,"delete"),className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700",children:[e.jsx(j,{})," 삭제 처리"]}),e.jsxs("button",{onClick:()=>m(s.id,"dismiss"),className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200",children:[e.jsx(b,{})," 반려"]})]})]})},s.id)})})})]})}export{k as default};
