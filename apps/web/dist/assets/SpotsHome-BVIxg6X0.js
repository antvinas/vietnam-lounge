import{f as X,u as $,j as e,m as _,a as Z,c as H,L as Q,e as J}from"./index-DbUEaAMy.js";import{u as Y}from"./useQuery-BhrWanxj.js";import{r as m}from"./react-Dp4Gqg7U.js";import{S as A}from"./index-DfvoamT7.js";import{F as ee,a as te,b as re,c as ae,d as w}from"./index-FMo13rtH.js";import{c as f,M as se}from"./map-pin-6Og0nRkm.js";import{P as j,R as ne}from"./filters-BnXygf5K.js";import"./spot.write-Cy02D3Oi.js";import"./firebase-Co7q5P-C.js";import"./firestore-DzFVOJbi.js";import"./firebase-CmtxdFcx.js";import"./spot.search-Bgh3s1s1.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ie=f("clock",le);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],oe=f("cloud-rain",de);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],I=f("cloud",ce);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],me=f("moon",xe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],he=f("refresh-cw",ge);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],be=f("star",ue);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],S=f("sun",pe),fe=({spot:t,featured:s=!1,onClick:l,onHover:n})=>{const r=X(),{contentMode:i}=$(),x=i==="nightlife",g=m.useMemo(()=>{var a,u;const d=(a=t.images)==null?void 0:a[0];return typeof d=="string"?d:d&&typeof d=="object"&&"url"in d?d.url:(t==null?void 0:t.heroImage)||(t==null?void 0:t.imageUrl)||((u=t==null?void 0:t.imageUrls)==null?void 0:u[0])||"/placeholders/spot.jpg"},[t]),c=()=>{l&&l(t.id),r(`${x?"/adult/spots":"/spots"}/${t.id}`)};return e.jsxs(_.div,{layout:!0,initial:{opacity:0},whileInView:{opacity:1},className:`group cursor-pointer flex flex-col gap-3 ${s?"md:col-span-2 md:row-span-2":""}`,onClick:c,onMouseEnter:()=>n==null?void 0:n(t.id),onMouseLeave:()=>n==null?void 0:n(null),children:[e.jsxs("div",{className:`relative overflow-hidden rounded-2xl bg-gray-200 dark:bg-gray-800 ${s?"aspect-video":"aspect-[4/3]"}`,children:[e.jsx("img",{src:g,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 ease-in-out group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"px-2 py-1 bg-white/90 dark:bg-black/80 backdrop-blur-md text-gray-900 dark:text-white text-[11px] font-bold rounded-lg shadow-sm tracking-tight",children:t.category})})]}),e.jsxs("div",{className:"px-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1 gap-2",children:[e.jsx("h3",{className:`font-bold text-gray-900 dark:text-white leading-tight group-hover:text-primary transition-colors ${s?"text-2xl":"text-lg"}`,children:t.name}),t.rating&&e.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-gray-900 dark:text-white shrink-0",children:[e.jsx(Z,{className:"text-yellow-400",size:10}),t.rating.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[e.jsx(H,{size:12,className:"shrink-0"}),e.jsxs("span",{className:"truncate",children:[t.region||"Vietnam"," ",t.address?`Â· ${t.address}`:""]})]})]})]})},ye=({spots:t,isLoading:s,onSpotHover:l,onSpotClick:n})=>s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10",children:[...Array(6)].map((r,i)=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"aspect-[4/3] bg-gray-200 dark:bg-gray-800 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-5 w-2/3 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]},i))}):t.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-12",children:t.map((r,i)=>e.jsx(fe,{spot:r,featured:i===0,onHover:l,onClick:n},r.id))}):e.jsxs("div",{className:"py-20 text-center border-t border-b border-dashed border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400",children:e.jsx(ee,{size:24})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"ì¡°ê±´ì— ë§ëŠ” ì¥ì†Œê°€ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"ë‹¤ë¥¸ ì§€ì—­ì´ë‚˜ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ë³´ì„¸ìš”."})]}),je=({mode:t="explorer",region:s="ì „ì²´",bgImage:l})=>{const{timeIcon:n,timeGreeting:r}=m.useMemo(()=>{const c=new Date().getHours();let d=e.jsx(S,{size:14}),a="ì˜¤ëŠ˜ë„ ì¦ê±°ìš´ ì—¬í–‰ ë˜ì„¸ìš”.";return c>=5&&c<12?(d=e.jsx(S,{size:14,className:"text-orange-300"}),a="ìƒì¾Œí•œ ì•„ì¹¨, ì—¬í–‰ì„ ì‹œì‘í•´ë³¼ê¹Œìš”?"):c>=12&&c<17?(d=e.jsx(I,{size:14,className:"text-sky-300"}),a="ë‚˜ë¥¸í•œ ì˜¤í›„, ì ì‹œ ì‰¬ì–´ê°ˆ ê³³ì„ ì°¾ì•„ë³´ì„¸ìš”."):c>=17&&c<20?(d=e.jsx(be,{size:14,className:"text-purple-300"}),a="ë…¸ì„ ì§€ëŠ” ì €ë…, ë‚­ë§Œì ì¸ ì‹ì‚¬ëŠ” ì–´ë•Œìš”?"):(d=e.jsx(me,{size:14,className:"text-yellow-300"}),a="ê¹Šì–´ê°€ëŠ” ë°¤, ë„ì‹œì˜ ì—´ê¸°ë¥¼ ëŠê»´ë³´ì„¸ìš”."),{timeIcon:d,timeGreeting:a}},[]),i=t==="nightlife",x=i?"bg-purple-900/40 text-purple-100":"bg-black/20 text-white",g=l||(i?"/images/nightlife-bg.jpg":"/images/daylife-bg.jpg");return e.jsxs("div",{className:"relative w-full h-[400px] lg:h-[460px] bg-gray-900",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-1000 hover:scale-105",style:{backgroundImage:`url(${g})`}}),e.jsx("div",{className:`absolute inset-0 ${i?"bg-black/70":"bg-black/40"}`}),e.jsx("div",{className:"relative z-10 h-full max-w-[1280px] mx-auto px-5 md:px-8 flex flex-col justify-center pb-16",children:e.jsxs(_.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium backdrop-blur-md border border-white/10 ${x}`,children:[e.jsx(se,{size:12}),s==="ì „ì²´"?"ë² íŠ¸ë‚¨ ì „ì—­":s]}),e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-black/30 text-gray-100 backdrop-blur-md border border-white/5",children:[n,r]})]}),e.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight drop-shadow-md",children:[s==="ì „ì²´"?"ë² íŠ¸ë‚¨,":s,e.jsx("br",{}),i?"ì ë“¤ì§€ ì•ŠëŠ” í™”ë ¤í•œ ë°¤.":"íŠ¹ë³„í•œ ì—¬í–‰ì´ ì‹œì‘ë˜ëŠ” ê³³."]}),e.jsx("p",{className:"text-base md:text-lg text-white/80 font-medium max-w-2xl",children:"í˜„ì§€ì¸ì´ ì¶”ì²œí•˜ëŠ” ìˆ¨ê²¨ì§„ ëª…ì†Œì™€ ë§›ì§‘ì„ ë°œê²¬í•´ë³´ì„¸ìš”."})]})})]})};async function ve(t){const s=A,l=s.getSponsoredSpots||s.fetchSponsoredSpots||s.fetchSponsorSpots;if(!l)return[];try{const n=await l(t??"explorer",10);return Array.isArray(n)?n:[]}catch{try{const n=await l({mode:t??"explorer",take:10});return Array.isArray(n)?n:[]}catch{return[]}}}function Ne({spots:t,autoPlayMs:s=4e3,height:l=240,mode:n}){const[r,i]=m.useState(t??[]),[x,g]=m.useState(0),c=m.useRef(null),d=m.useRef(!1);m.useEffect(()=>{let o=!0;return(!t||t.length===0)&&ve(n).then(b=>{o&&i(b.slice(0,5))}),()=>{o=!1,c.current&&window.clearInterval(c.current)}},[t,n]),m.useEffect(()=>{if(!(r.length<=1))return c.current&&window.clearInterval(c.current),c.current=window.setInterval(()=>{d.current||g(o=>(o+1)%r.length)},s),()=>{c.current&&window.clearInterval(c.current)}},[r.length,s]);const a=m.useMemo(()=>({width:`${r.length*100}%`,transform:`translateX(-${100/r.length*x}%)`,transition:"transform 600ms ease",height:l}),[r.length,x,l]);if(r.length===0)return null;const u=n==="nightlife"?"/adult/spots":"/spots";return e.jsxs("section",{className:"premium-glow relative w-full overflow-hidden rounded-2xl",style:{height:l},onMouseEnter:()=>d.current=!0,onMouseLeave:()=>d.current=!1,"aria-label":"í”„ë¦¬ë¯¸ì—„ ì¶”ì²œ ë°°ë„ˆ",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-black/10"}),e.jsx("div",{className:"flex h-full",style:a,children:r.map(o=>e.jsx(ke,{spot:o,height:l,base:u},o.id))}),e.jsx("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-2",children:r.map((o,b)=>e.jsx("button",{"aria-label":`ë°°ë„ˆ ${b+1}`,onClick:()=>g(b),className:`h-2 w-2 rounded-full transition-all ${b===x?"w-6 bg-amber-400":"bg-white/60 hover:bg-white"}`},b))}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center",children:e.jsx("button",{"aria-label":"ì´ì „ ë°°ë„ˆ",onClick:()=>g(o=>(o-1+r.length)%r.length),className:"m-2 rounded-full bg-black/30 p-2 text-white hover:bg-black/50",children:"â€¹"})}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center",children:e.jsx("button",{"aria-label":"ë‹¤ìŒ ë°°ë„ˆ",onClick:()=>g(o=>(o+1)%r.length),className:"m-2 rounded-full bg-black/30 p-2 text-white hover:bg-black/50",children:"â€º"})})]})}function ke({spot:t,height:s,base:l}){var r,i;const n=t.heroImage||((r=t.images)==null?void 0:r[0])||((i=t.imageUrls)==null?void 0:i[0])||"";return e.jsxs("article",{className:"relative h-full w-full shrink-0",style:{height:s},role:"group","aria-roledescription":"premium banner",children:[e.jsx("img",{src:n,alt:t.name,loading:"lazy",className:"h-full w-full object-cover",draggable:!1}),e.jsx("div",{className:"absolute inset-0 flex items-end",children:e.jsxs("div",{className:"m-4 max-w-[70%] rounded-xl bg-black/45 p-4 text-white backdrop-blur",children:[e.jsx("div",{className:"sponsor-badge mb-2",children:t.sponsorLabel||"ì¶”ì²œ ìŠ¤íŒŸ"}),e.jsx("h3",{className:"text-xl font-bold leading-tight",children:t.name}),t.description&&e.jsx("p",{className:"mt-1 line-clamp-2 text-sm opacity-90",children:t.description}),e.jsx("div",{className:"mt-3",children:e.jsx(Q,{to:`${l}/${t.id}`,className:"rounded-lg bg-amber-400 px-3 py-2 text-sm font-semibold text-black hover:bg-amber-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-300",children:"ìì„¸íˆ ë³´ê¸°"})})]})})]})}const we={explorer:["ì „ì²´","ë§›ì§‘","ì¹´í˜","ê´€ê´‘ì§€","ì‡¼í•‘","ìŠ¤íŒŒ/ë§ˆì‚¬ì§€","ì•¡í‹°ë¹„í‹°","í˜¸í…”/ë¦¬ì¡°íŠ¸"],nightlife:["ì „ì²´","í´ëŸ½","ë°”/í","ë¼ìš´ì§€","ê°€ë¼ì˜¤ì¼€","ì´ë²¤íŠ¸","ì‹¬ì•¼ì‹ë‹¹"]},Se=({activeCategory:t,onSelect:s,mode:l="explorer"})=>{const n=m.useRef(null),r=we[l];return e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{ref:n,className:"flex gap-2 overflow-x-auto no-scrollbar py-2 px-1",children:r.map(i=>{const x=t===i;return e.jsx("button",{onClick:()=>s(i),className:`
                whitespace-nowrap px-5 py-2.5 rounded-full text-sm font-bold transition-all duration-200 border
                ${x?"bg-gray-900 text-white border-gray-900 dark:bg-white dark:text-black dark:border-white shadow-md transform scale-105":"bg-white text-gray-500 border-gray-200 hover:border-gray-400 hover:text-gray-900 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700 dark:hover:text-gray-200"}
              `,children:i},i)})}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-12 bg-gradient-to-l from-white dark:from-gray-900 to-transparent pointer-events-none"})]})},Ce=({selectedLocation:t,onSelectLocation:s})=>{var d;const[l,n]=m.useState(!1),[r,i]=m.useState("all"),x=m.useRef(null),g=(d=j.find(a=>a.id===t))==null?void 0:d.name;m.useEffect(()=>{const a=u=>{x.current&&!x.current.contains(u.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);const c=r==="all"?j:j.filter(a=>a.region===r);return e.jsxs("div",{className:"relative z-30",ref:x,children:[e.jsxs("button",{onClick:()=>n(!l),className:`flex items-center gap-3 rounded-2xl px-5 py-3 transition-all hover:bg-gray-50 dark:hover:bg-gray-800 w-full md:w-auto ${t?"bg-primary/5 ring-1 ring-primary/20":""}`,children:[e.jsx("div",{className:`rounded-full p-2 transition-colors ${t?"bg-primary text-white":"bg-gray-100 text-gray-500 dark:bg-gray-700"}`,children:e.jsx(te,{className:"text-lg"})}),e.jsxs("div",{className:"text-left min-w-[100px]",children:[e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-wider text-text-tertiary",children:"Location"}),e.jsx("p",{className:"text-sm font-bold text-text-main truncate max-w-[120px]",children:g||"ì–´ë””ë¡œ ê°ˆê¹Œìš”?"})]}),e.jsx(re,{className:`ml-2 text-xl text-text-tertiary transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>n(!1)}),e.jsxs("div",{className:"fixed bottom-0 left-0 z-50 w-full rounded-t-2xl border-t border-border bg-white shadow-2xl animate-in slide-in-from-bottom md:absolute md:bottom-auto md:left-0 md:top-full md:mt-3 md:w-[600px] md:rounded-2xl md:border md:shadow-xl md:animate-in md:fade-in md:zoom-in-95 dark:border-border/80 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border p-4 md:hidden",children:[e.jsx("h3",{className:"font-bold text-text-main",children:"ì—¬í–‰ì§€ ì„ íƒ"}),e.jsx("button",{onClick:()=>n(!1),className:"p-1 text-text-tertiary",children:e.jsx(ae,{className:"text-xl"})})]}),e.jsx("div",{className:"flex border-b border-border bg-gray-50/50 p-1 dark:border-border/80 dark:bg-gray-800/50 md:rounded-t-2xl overflow-x-auto no-scrollbar",children:ne.map(a=>e.jsx("button",{onClick:()=>i(a.id),className:`flex-1 min-w-[60px] rounded-lg py-2.5 text-xs font-semibold transition-colors whitespace-nowrap ${r===a.id?"bg-white text-primary shadow-sm dark:bg-gray-700 dark:text-white":"text-text-tertiary hover:bg-gray-100 hover:text-text-main dark:hover:bg-gray-700/50"}`,children:a.label},a.id))}),e.jsx("div",{className:"p-5 max-h-[60vh] overflow-y-auto md:max-h-[400px]",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>{s(null),n(!1)},className:`flex items-center justify-center rounded-xl border border-dashed border-border py-3 text-sm font-medium text-text-secondary transition hover:border-primary hover:text-primary ${t?"":"border-primary bg-primary/5 text-primary"}`,children:"ì „ì²´ ì§€ì—­ ë³´ê¸°"}),c.map(a=>e.jsxs("button",{onClick:()=>{s(a.id),n(!1)},className:`group relative flex flex-col items-start justify-center rounded-xl border px-4 py-3 text-left transition-all hover:border-primary/50 hover:bg-primary/5 ${t===a.id?"border-primary bg-primary/5 ring-1 ring-primary/20":"border-border dark:border-border/80"}`,children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:`text-sm font-bold ${t===a.id?"text-primary":"text-text-main"}`,children:a.name}),a.type==="spot"&&e.jsx("span",{className:"text-[10px] bg-green-100 text-green-700 px-1.5 rounded dark:bg-green-900/30 dark:text-green-300",children:"ëª…ì†Œ"})]}),e.jsx("span",{className:"text-[11px] text-text-tertiary group-hover:text-primary/70 font-medium mt-0.5",children:a.name_en})]},a.id))]})}),e.jsx("div",{className:"border-t border-border bg-gray-50 px-4 py-3 text-center dark:border-border/80 dark:bg-gray-800/50 md:rounded-b-2xl",children:e.jsxs("p",{className:"flex items-center justify-center gap-1.5 text-xs text-text-tertiary",children:[e.jsx(w,{})," ì°¾ëŠ” ì—¬í–‰ì§€ê°€ ì—†ë‚˜ìš”? ",e.jsx("span",{className:"font-semibold text-text-main",children:"ê²€ìƒ‰ì°½"}),"ì„ ì´ìš©í•´ ê»€í„°, ë””ì—”ë¹„ì—” ë“±ì„ ì°¾ì•„ë³´ì„¸ìš”."]})})]})]})]})},Me=({selectedLocation:t,onSelectLocation:s,searchTerm:l,onSearchChange:n,onSearchSubmit:r})=>e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-0",children:e.jsxs("div",{className:"relative flex flex-col md:flex-row items-center bg-white dark:bg-gray-800 rounded-[2rem] shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-gray-100 dark:border-gray-700 p-2 gap-2 transition-all hover:shadow-[0_12px_40px_rgb(0,0,0,0.15)]",children:[e.jsx("div",{className:"w-full md:w-auto relative z-20",children:e.jsx(Ce,{selectedLocation:t,onSelectLocation:s})}),e.jsx("div",{className:"hidden md:block w-px h-10 bg-gray-200 dark:bg-gray-700 mx-2"}),e.jsxs("div",{className:"flex-1 w-full relative flex items-center group px-2",children:[e.jsx("div",{className:"absolute left-4 text-gray-400 group-focus-within:text-primary transition-colors",children:e.jsx(w,{size:22})}),e.jsx("input",{type:"text",value:l,onChange:n,onKeyDown:i=>i.key==="Enter"&&r&&r(),placeholder:"ì–´ë””ë¡œ ë– ë‚˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? (ë§›ì§‘, í˜¸í…”, ê´€ê´‘ì§€)",className:"w-full h-14 pl-12 pr-4 bg-transparent border-none focus:ring-0 focus:outline-none text-gray-800 dark:text-gray-100 font-bold placeholder:text-gray-400 placeholder:font-normal text-lg"})]}),e.jsxs("button",{onClick:r,className:"w-full md:w-auto px-8 h-12 rounded-full bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold shadow-lg hover:shadow-blue-500/30 transition-all transform hover:-translate-y-0.5 active:translate-y-0 flex items-center justify-center gap-2 md:mr-1",children:[e.jsx("span",{className:"hidden md:inline",children:"ê²€ìƒ‰"}),e.jsx("span",{className:"md:hidden",children:"ê²€ìƒ‰í•˜ê¸°"}),e.jsx(w,{className:"md:hidden",size:20})]})]})}),ze=({selectedLocationId:t})=>{const s=t?j.find(a=>a.id===t):{name:"í•˜ë…¸ì´",region:"north"},l=(s==null?void 0:s.name)||"ë² íŠ¸ë‚¨",[n,r]=m.useState("");m.useEffect(()=>{const a=()=>{const o=new Date,b={timeZone:"Asia/Ho_Chi_Minh",hour:"2-digit",minute:"2-digit",hour12:!0};r(new Intl.DateTimeFormat("ko-KR",b).format(o))};a();const u=setInterval(a,1e3*60);return()=>clearInterval(u)},[]);const i=5.42,x=1e5,g=(x/100*i).toLocaleString(),d=(()=>{const a=(s==null?void 0:s.region)||"north";return a==="south"||a==="island"?{temp:"32Â°C",text:"ë¬´ë”ì›€",icon:e.jsx(S,{size:24})}:a==="central"?{temp:"29Â°C",text:"êµ¬ë¦„ ì¡°ê¸ˆ",icon:e.jsx(I,{size:24})}:{temp:"24Â°C",text:"íë¦¼",icon:e.jsx(oe,{size:24})}})();return e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 md:px-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border border-gray-100 dark:border-gray-700 rounded-2xl p-4 shadow-sm gap-4 md:gap-8",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 w-full md:w-auto border-b md:border-b-0 md:border-r border-gray-100 dark:border-gray-700 pb-4 md:pb-0",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 p-3 rounded-full text-orange-500",children:d.icon}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["ì˜¤ëŠ˜ì˜ ë‚ ì”¨ (",l,")"]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:d.temp}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 mb-0.5",children:d.text})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-1 w-full md:w-auto border-b md:border-b-0 md:border-r border-gray-100 dark:border-gray-700 pb-4 md:pb-0",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/30 p-3 rounded-full text-green-600",children:e.jsx(he,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"ì‹¤ì‹œê°„ í™˜ìœ¨ (VND)"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:[x.toLocaleString(),"â‚«"]}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300 mb-0.5",children:["â‰ˆ ",g,"ì›"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-1 w-full md:w-auto",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-full text-blue-500",children:e.jsx(ie,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"ë² íŠ¸ë‚¨ í˜„ì§€ ì‹œê°„"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:n}),e.jsx("span",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded mb-1",children:"í•œêµ­ -2ì‹œê°„"})]})]})]})]})})};function $e(t){return t==="nightlife"?"nightlife":"explorer"}async function _e(t){var n;const s=A,l=s.getSpots||s.fetchSpots||((n=s.spotsApi)==null?void 0:n.getSpots);if(!l)return[];try{const r=await l({mode:t});return Array.isArray(r)?r:r&&Array.isArray(r.items)?r.items:[]}catch{const r=await l();return Array.isArray(r)?r:[]}}const qe=()=>{const{contentMode:t}=$(),s=$e(t),[l,n]=m.useState(null),[r,i]=m.useState(null),[x,g]=m.useState(null),[c,d]=m.useState("ì „ì²´"),[a,u]=m.useState(""),[o,b]=J();m.useEffect(()=>{const h=o.get("region"),p=o.get("category"),y=o.get("q");h&&g(h),p&&d(p),y&&u(y)},[o]);const{data:C=[],isLoading:L}=Y({queryKey:["spots",s],queryFn:()=>_e(s)}),v=m.useMemo(()=>C.filter(h=>{var M,z;const p=h;let y=!0;if(x){const N=j.find(W=>W.id===x),k=(N==null?void 0:N.name)||x,U=p.city||((M=p.location)==null?void 0:M.city)||"",K=p.region||"",V=p.address||((z=p.location)==null?void 0:z.address)||"";y=U.includes(k)||K.includes(k)||V.includes(k)}const D=p.category||"",O=c==="ì „ì²´"||D===c,B=p.name||"",G=p.description||"",q=a===""||B.toLowerCase().includes(a.toLowerCase())||G.toLowerCase().includes(a.toLowerCase());return y&&O&&q}),[C,x,c,a]),R=h=>{g(h),h?o.set("region",h):o.delete("region"),b(o)},E=h=>{d(h),h==="ì „ì²´"?o.delete("category"):o.set("category",h),b(o)},F=h=>{u(h.target.value)},P=()=>{g(null),d("ì „ì²´"),u(""),b({})},T=Se;return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-black pb-20",children:[e.jsx(je,{}),e.jsxs("main",{className:"container mx-auto px-4 pt-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx(Ne,{mode:s})}),e.jsx("div",{className:"mb-8",children:e.jsx(ze,{selectedLocationId:x})}),e.jsx("div",{className:"sticky top-[70px] z-30 -mx-4 px-4 pb-4 pt-2 bg-gray-50/95 dark:bg-black/95 backdrop-blur-md transition-all",children:e.jsx(Me,{selectedLocation:x,onSelectLocation:R,searchTerm:a,onSearchChange:F,onSearchSubmit:()=>{}})}),e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"w-full max-w-5xl overflow-x-auto no-scrollbar py-2",children:e.jsx(T,{activeCategory:c,onSelectCategory:E})})}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 px-2",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:["íƒìƒ‰ ê²°ê³¼ ",e.jsx("span",{className:"text-primary text-xl",children:v.length})]})}),e.jsx("div",{className:"min-h-[500px]",children:v.length>0?e.jsx(ye,{spots:v,isLoading:L,onSpotHover:n,onSpotClick:i}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center bg-white dark:bg-gray-900 rounded-3xl border border-dashed border-gray-200 dark:border-gray-800 mx-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 dark:bg-gray-800 rounded-full flex items-center justify-center mb-6 text-4xl shadow-inner",children:"ğŸ¤”"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"ì¡°ê±´ì— ë§ëŠ” ì¥ì†Œê°€ ì—†ì–´ìš”"}),e.jsx("p",{className:"text-gray-500",children:"ë‹¤ë¥¸ í‚¤ì›Œë“œë‚˜ ì§€ì—­ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì‹œëŠ” ê±´ ì–´ë–¨ê¹Œìš”?"}),e.jsx("button",{onClick:P,className:"mt-6 px-8 py-3 bg-gray-900 dark:bg-white text-white dark:text-black rounded-full font-bold hover:opacity-90 transition shadow-lg",children:"í•„í„° ì´ˆê¸°í™”"})]})})]})]})]})};export{qe as default};
