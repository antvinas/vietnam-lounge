import{i as C,p as I,j as e,I as $,L as D}from"./index-DbUEaAMy.js";import{r as o}from"./react-Dp4Gqg7U.js";import{u as M}from"./useQuery-BhrWanxj.js";import{g as A}from"./events.api-rFIjYAxj.js";import"./firebase-Co7q5P-C.js";import"./firebase-CmtxdFcx.js";const L=C()(I(t=>({isGatePassed:!1,nightlifeEntered:!1,setGatePassed:n=>t({isGatePassed:n}),setNightlifeEntered:n=>t({nightlifeEntered:n}),resetMode:()=>t({isGatePassed:!1,nightlifeEntered:!1})}),{name:"mode-storage",version:1,partialize:t=>({isGatePassed:t.isGatePassed,nightlifeEntered:t.nightlifeEntered})})),S=({title:t,message:n})=>e.jsx("main",{className:"mx-auto max-w-screen-xl px-4 md:px-10 lg:px-20 py-16 lg:py-24",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] bg-surface rounded-2xl border border-border p-8 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-6",children:e.jsx($,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-h1 font-extrabold tracking-tight text-text-main",children:t}),e.jsx("p",{className:"mt-4 text-body max-w-xl mx-auto text-text-secondary",children:n})]})});function F({event:t}){return e.jsxs(D,{to:`/events/${t.id}`,className:"group relative flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition-all hover:-translate-y-1 hover:shadow-lg dark:border-gray-700 dark:bg-gray-800",children:[e.jsxs("div",{className:"relative aspect-[4/3] w-full overflow-hidden",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute left-3 top-3 rounded-full bg-black/60 px-3 py-1 text-xs font-semibold text-white backdrop-blur-md",children:t.category})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-5",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:t.date}),e.jsx("span",{children:t.location})]}),e.jsx("h3",{className:"mb-2 line-clamp-2 text-lg font-bold text-gray-900 group-hover:text-blue-600 dark:text-white dark:group-hover:text-purple-400",children:t.name}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-purple-400",children:"ìƒì„¸ë³´ê¸° â†’"})})]})]})}const P=["Hanoi","Ho Chi Minh City","Da Nang","Nha Trang","Phu Quoc"],G=["Festival","Tour","Food","Music","Nightlife"];function R(t=""){return`absolute -m-px h-px w-px overflow-hidden whitespace-nowrap border-0 p-0 ${t}`}function T({value:t,onChange:n,label:h,placeholder:b}){const p=o.useId(),d=`${p}-city-input`,u=`${p}-city-listbox`,[i,c]=o.useState(!1),[x,a]=o.useState(-1),[s,g]=o.useState(t),f=o.useRef(null),y=o.useRef(null),l=o.useMemo(()=>{const r=s.trim().toLowerCase();return P.filter(m=>m.toLowerCase().includes(r))},[s]);o.useEffect(()=>g(t),[t]);const k=r=>{var m;n(r),g(r),c(!1),a(-1),(m=f.current)==null||m.setSelectionRange(r.length,r.length)},j=r=>{if(!i&&(r.key==="ArrowDown"||r.key==="ArrowUp")){c(!0),a(0),r.preventDefault();return}i&&(r.key==="ArrowDown"?(a(m=>Math.min(m+1,l.length-1)),r.preventDefault()):r.key==="ArrowUp"?(a(m=>Math.max(m-1,0)),r.preventDefault()):r.key==="Enter"?x>=0&&l[x]&&(k(l[x]),r.preventDefault()):r.key==="Escape"?(c(!1),r.preventDefault()):r.key==="Tab"&&c(!1))},w=x>=0?`${u}-opt-${x}`:void 0;return e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:d,className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:h}),e.jsx("input",{ref:f,id:d,type:"text",value:s,placeholder:b,onChange:r=>{g(r.target.value),c(!0)},onFocus:()=>c(!0),onKeyDown:j,role:"combobox","aria-autocomplete":"list","aria-expanded":i,"aria-controls":u,"aria-activedescendant":w,className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:focus:border-purple-500 dark:focus:ring-purple-500/20"}),i&&e.jsx("ul",{id:u,ref:y,role:"listbox",className:"absolute z-20 mt-1 max-h-56 w-full overflow-auto rounded-lg border border-gray-200 bg-white shadow-lg dark:border-gray-700 dark:bg-gray-800",children:l.length===0?e.jsx("li",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:"ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ"}):l.map((r,m)=>{const v=r===t,N=m===x;return e.jsx("li",{id:`${u}-opt-${m}`,role:"option","aria-selected":v,className:`cursor-pointer px-4 py-2 text-sm transition-colors ${N?"bg-gray-100 dark:bg-gray-700":""} ${v?"font-semibold text-blue-600 dark:text-purple-400":"text-gray-700 dark:text-gray-300"}`,onMouseDown:E=>E.preventDefault(),onClick:()=>k(r),onMouseEnter:()=>a(m),children:r},r)})})]})}function H({value:t,onChange:n,label:h}){const p=`${o.useId()}-cat-list`,[d,u]=o.useState(-1),i=o.useMemo(()=>["All",...G],[]),c=t?i.findIndex(a=>a===t):0,x=a=>{if(a.key==="ArrowDown")u(s=>Math.min((s<0?c:s)+1,i.length-1)),a.preventDefault();else if(a.key==="ArrowUp")u(s=>Math.max((s<0?c:s)-1,0)),a.preventDefault();else if(a.key==="Enter"||a.key===" "){const s=d<0?c:d,g=i[s];n(g==="All"?null:g),a.preventDefault()}};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:h}),e.jsx("ul",{id:p,role:"listbox",tabIndex:0,"aria-label":"ì¹´í…Œê³ ë¦¬ ì„ íƒ","aria-activedescendant":d>=0?`${p}-opt-${d}`:void 0,className:"mt-1 flex flex-wrap gap-2",onKeyDown:x,children:i.map((a,s)=>{const g=a===(t??"All"),f=s===d;return e.jsx("li",{id:`${p}-opt-${s}`,role:"option","aria-selected":g,className:`cursor-pointer rounded-full border px-3 py-1.5 text-xs font-medium transition-all ${g?"border-blue-500 bg-blue-50 text-blue-700 dark:border-purple-500 dark:bg-purple-900/30 dark:text-purple-300":"border-gray-300 bg-white text-gray-600 hover:border-gray-400 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:border-gray-500"} ${f?"ring-2 ring-blue-500/40 dark:ring-purple-500/40":""}`,onClick:()=>n(a==="All"?null:a),onMouseEnter:()=>u(s),onMouseLeave:()=>u(-1),children:a},a)})})]})}function _(){const{nightlifeEntered:t}=L(),n=t,{data:h=[],isLoading:b,isError:p}=M({queryKey:["events",n],queryFn:()=>A(n)}),[d,u]=o.useState(""),[i,c]=o.useState(null),[x,a]=o.useState(""),[s,g]=o.useState(""),f=o.useMemo(()=>h.filter(l=>!(d&&l.city!==d||i&&l.category!==i||x&&l.date<x||s&&l.date>s)),[d,i,x,s,h]),y=()=>{u(""),c(null),a(""),g("")};return b?e.jsxs("div",{className:"flex min-h-[50vh] flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-blue-500 dark:border-gray-700 dark:border-t-purple-500"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"ì´ë²¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ìž…ë‹ˆë‹¤..."})]}):p?e.jsxs("div",{className:"flex min-h-[50vh] flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"mb-4 text-xl font-bold text-gray-900 dark:text-white",children:"ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"rounded-lg bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 dark:bg-purple-600 dark:hover:bg-purple-700",children:"ìƒˆë¡œê³ ì¹¨"})]}):e.jsxs("section",{className:"mx-auto max-w-7xl px-4 py-8 md:py-12",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-gray-900 dark:text-white md:text-5xl",children:n?"ðŸŒ™ Nightlife Events":"â˜€ï¸ Upcoming Events"}),e.jsx("p",{className:"mt-3 text-lg text-gray-600 dark:text-gray-400",children:n?"ë² íŠ¸ë‚¨ì˜ ë°¤ì„ ëœ¨ê²ê²Œ ë‹¬êµ¬ëŠ” ìµœê³ ì˜ íŒŒí‹°ì™€ ì´ë²¤íŠ¸ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”.":"ë² íŠ¸ë‚¨ ì—¬í–‰ì˜ ì¦ê±°ì›€ì„ ë”í•´ì¤„ ë‹¤ì±„ë¡œìš´ ì¶•ì œì™€ í–‰ì‚¬ë¥¼ í™•ì¸í•˜ì„¸ìš”."})]}),e.jsxs("form",{className:"mb-8 grid grid-cols-1 gap-6 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(T,{value:d,onChange:u,label:"ë„ì‹œ",placeholder:"ë„ì‹œ ê²€ìƒ‰ (ì˜ˆ: Hanoi)"}),e.jsx(H,{value:i,onChange:c,label:"ì¹´í…Œê³ ë¦¬"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from",className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ì‹œìž‘ì¼"}),e.jsx("input",{id:"from",type:"date",value:x,onChange:l=>a(l.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:focus:border-purple-500 dark:focus:ring-purple-500/20"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"to",className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ì¢…ë£Œì¼"}),e.jsx("input",{id:"to",type:"date",value:s,onChange:l=>g(l.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:focus:border-purple-500 dark:focus:ring-purple-500/20"})]}),e.jsxs("div",{className:"col-span-full mt-2 flex items-center justify-between border-t border-gray-100 pt-4 dark:border-gray-700",children:[e.jsxs("div",{"aria-live":"polite",className:R(),children:["í•„í„° ê²°ê³¼ ",f.length,"ê±´"]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ì´ ",e.jsx("strong",{className:"text-gray-900 dark:text-white",children:f.length}),"ê°œì˜ ì´ë²¤íŠ¸"]}),e.jsx("button",{type:"button",onClick:y,className:"text-sm font-medium text-gray-500 hover:text-gray-900 hover:underline dark:text-gray-400 dark:hover:text-white","aria-label":"í•„í„° ì´ˆê¸°í™”",children:"í•„í„° ì´ˆê¸°í™”"})]})]}),f.length===0?e.jsx("div",{className:"mt-12",children:e.jsx(S,{title:"ì¡°ê±´ì— ë§žëŠ” ì´ë²¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤",message:"í•„í„°ë¥¼ ì¡°ì •í•˜ê±°ë‚˜ ì´ˆê¸°í™”í•´ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”."})}):e.jsx("ul",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:f.map(l=>e.jsx("li",{children:e.jsx(F,{event:l})},l.id))})]})}export{_ as default};
